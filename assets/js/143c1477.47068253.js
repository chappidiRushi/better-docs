"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[1891],{2389(e,n,i){i.r(n),i.d(n,{assets:()=>d,contentTitle:()=>c,default:()=>h,frontMatter:()=>t,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"html/parsing-algorithms","title":"Parsing Algorithms","description":"----------------","source":"@site/docs/html/Parsing Algorithms.md","sourceDirName":"html","slug":"/html/parsing-algorithms","permalink":"/better-docs/docs/html/parsing-algorithms","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/html/Parsing Algorithms.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"parsing-algorithms","title":"Parsing Algorithms","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"HTML Document Model","permalink":"/better-docs/docs/html/html-document-model"},"next":{"title":"Metadata and Document Head","permalink":"/better-docs/docs/html/metadata-and-document-head"}}');var s=i(4848),l=i(8453);const t={id:"parsing-algorithms",title:"Parsing Algorithms",sidebar_position:6},c=void 0,d={},o=[{value:"1. Tokenization Algorithm",id:"1-tokenization-algorithm",level:2},{value:"2. Tree Construction Algorithm",id:"2-tree-construction-algorithm",level:2},{value:"3. Error Handling and Error Recovery",id:"3-error-handling-and-error-recovery",level:2},{value:"4. Foster Parenting",id:"4-foster-parenting",level:2},{value:"5. Implied Tags and Omitted End Tags",id:"5-implied-tags-and-omitted-end-tags",level:2},{value:"6. Foreign Content (SVG &amp; MathML Integration)",id:"6-foreign-content-svg--mathml-integration",level:2},{value:"7. Script Execution During Parsing",id:"7-script-execution-during-parsing",level:2},{value:"8. Blocking vs Non-Blocking Parsing",id:"8-blocking-vs-non-blocking-parsing",level:2},{value:"Mental Model (Interview One-Liner)",id:"mental-model-interview-one-liner",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"1-tokenization-algorithm",children:"1. Tokenization Algorithm"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," Converts a byte-decoded character stream into a stream of tokens using a deterministic state machine."]}),"\n",(0,s.jsx)(n.p,{children:"Key properties:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Input: Unicode code points"}),"\n",(0,s.jsx)(n.li,{children:"Output: Tokens (not nodes)"}),"\n",(0,s.jsx)(n.li,{children:"Driven by insertion states"}),"\n",(0,s.jsx)(n.li,{children:"Context-sensitive (depends on previous tokens)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Token types:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Doctype"}),"\n",(0,s.jsx)(n.li,{children:"Start tag (name, attributes)"}),"\n",(0,s.jsx)(n.li,{children:"End tag"}),"\n",(0,s.jsx)(n.li,{children:"Comment"}),"\n",(0,s.jsx)(n.li,{children:"Character"}),"\n",(0,s.jsx)(n.li,{children:"EOF"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Special states:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Data"}),"\n",(0,s.jsx)(n.li,{children:"Tag open"}),"\n",(0,s.jsx)(n.li,{children:"Attribute name/value"}),"\n",(0,s.jsx)(n.li,{children:"RawText / RCDATA (script, style, textarea, title)"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<div id="x">A</div>\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:'StartTag(div, id="x")\nCharacter(A)\nEndTag(div)\n'})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"2-tree-construction-algorithm",children:"2. Tree Construction Algorithm"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," Consumes tokens and mutates the DOM tree according to the current insertion mode."]}),"\n",(0,s.jsx)(n.p,{children:"Core mechanics:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Stack of open elements"}),"\n",(0,s.jsxs)(n.li,{children:["Insertion modes (",(0,s.jsx)(n.code,{children:"initial"}),", ",(0,s.jsx)(n.code,{children:"before html"}),", ",(0,s.jsx)(n.code,{children:"in head"}),", ",(0,s.jsx)(n.code,{children:"in body"}),", etc.)"]}),"\n",(0,s.jsx)(n.li,{children:"Active formatting elements list"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Guarantees:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM is always produced"}),"\n",(0,s.jsx)(n.li,{children:"Invalid markup is normalized"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<b><i>A</b>B</i>\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"Parser reconstructs formatting to maintain tree integrity\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"3-error-handling-and-error-recovery",children:"3. Error Handling and Error Recovery"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," HTML defines explicit recovery rules instead of throwing parse errors."]}),"\n",(0,s.jsx)(n.p,{children:"Principles:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Never abort parsing"}),"\n",(0,s.jsx)(n.li,{children:"Errors are silent and recoverable"}),"\n",(0,s.jsx)(n.li,{children:"Browser behavior must be deterministic"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Common recoveries:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Ignored unexpected end tags"}),"\n",(0,s.jsx)(n.li,{children:"Implicit element creation"}),"\n",(0,s.jsx)(n.li,{children:"Tag reparenting"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<p><div>A</p>\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"<p></p>\n<div>A</div>\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"4-foster-parenting",children:"4. Foster Parenting"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," Special tree correction when parsing table-related content."]}),"\n",(0,s.jsx)(n.p,{children:"Applies when:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Non-table elements appear inside table contexts"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Behavior:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Nodes are reparented outside the table"}),"\n",(0,s.jsx)(n.li,{children:"Prevents illegal DOM structures"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<table>\n  <p>A</p>\n</table>\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"<p>A</p>\n<table></table>\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"5-implied-tags-and-omitted-end-tags",children:"5. Implied Tags and Omitted End Tags"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," The parser auto-inserts or closes elements based on content model rules."]}),"\n",(0,s.jsx)(n.p,{children:"Implied elements:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<html>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<head>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<body>"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Omitted end tags:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<li>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<p>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<td>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<option>"})}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<ul>\n  <li>A\n  <li>B\n</ul>\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-text",children:"<li>A</li>\n<li>B</li>\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"6-foreign-content-svg--mathml-integration",children:"6. Foreign Content (SVG & MathML Integration)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," HTML parser switches namespaces when encountering foreign elements."]}),"\n",(0,s.jsx)(n.p,{children:"Namespaces:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"HTML"}),"\n",(0,s.jsx)(n.li,{children:"SVG"}),"\n",(0,s.jsx)(n.li,{children:"MathML"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Rules:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Case sensitivity changes"}),"\n",(0,s.jsx)(n.li,{children:"Attribute name adjustments"}),"\n",(0,s.jsx)(n.li,{children:"Exit foreign mode on integration points"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<svg>\n  <foreignObject>\n    <div>HTML inside SVG</div>\n  </foreignObject>\n</svg>\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"7-script-execution-during-parsing",children:"7. Script Execution During Parsing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," Script elements can synchronously pause parsing."]}),"\n",(0,s.jsx)(n.p,{children:"Execution rules:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Inline scripts execute immediately"}),"\n",(0,s.jsxs)(n.li,{children:["External scripts block unless ",(0,s.jsx)(n.code,{children:"defer"})," / ",(0,s.jsx)(n.code,{children:"async"})]}),"\n",(0,s.jsx)(n.li,{children:"DOM is partially constructed"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Side effects:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"DOM mutation during parse"}),"\n",(0,s.jsx)(n.li,{children:"Parser re-entry"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:"<script>\n  document.write('<p>Injected</p>');\n<\/script>\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"8-blocking-vs-non-blocking-parsing",children:"8. Blocking vs Non-Blocking Parsing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Definition:"})," Certain resources affect parser progression."]}),"\n",(0,s.jsx)(n.p,{children:"Blocking:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"<script>"})," (classic)"]}),"\n",(0,s.jsx)(n.li,{children:"CSSOM construction (render-blocking)"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Non-blocking:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<script async>"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"<script defer>"})}),"\n",(0,s.jsx)(n.li,{children:"Preload scanner"}),"\n"]}),"\n",(0,s.jsxs)(i,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-html",children:'<script src="a.js"><\/script>        \x3c!-- blocks --\x3e\n<script defer src="b.js"><\/script>  \x3c!-- non-blocking --\x3e\n<script async src="c.js"><\/script>  \x3c!-- non-blocking, unordered --\x3e\n'})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"mental-model-interview-one-liner",children:"Mental Model (Interview One-Liner)"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"HTML parsing is a streaming, state-machine\u2013driven algorithm that guarantees DOM construction via deterministic error recovery, even for invalid markup, while interleaving script execution."})}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,n,i){i.d(n,{R:()=>t,x:()=>c});var r=i(6540);const s={},l=r.createContext(s);function t(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);