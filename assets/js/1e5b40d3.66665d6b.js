"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[2531],{8453(e,n,r){r.d(n,{R:()=>t,x:()=>l});var i=r(6540);const s={},o=i.createContext(s);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:t(e.components),i.createElement(o.Provider,{value:n},e.children)}},9834(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"mongo/mongodb-drivers-ecosystem","title":"Drivers and Ecosystem","description":"-----------------","source":"@site/docs/mongo/Drivers and Ecosystem.md","sourceDirName":"mongo","slug":"/mongo/mongodb-drivers-ecosystem","permalink":"/better-docs/docs/mongo/mongodb-drivers-ecosystem","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/mongo/Drivers and Ecosystem.md","tags":[],"version":"current","sidebarPosition":20,"frontMatter":{"id":"mongodb-drivers-ecosystem","title":"Drivers and Ecosystem","sidebar_position":20},"sidebar":"tutorialSidebar","previous":{"title":"Deployment Architectures","permalink":"/better-docs/docs/mongo/mongodb-deployment-architectures"},"next":{"title":"MongoDB Limits, Edge Cases, and Anti-Patterns","permalink":"/better-docs/docs/mongo/mongodb-limits-edge-cases"}}');var s=r(4848),o=r(8453);const t={id:"mongodb-drivers-ecosystem",title:"Drivers and Ecosystem",sidebar_position:20},l=void 0,c={},d=[{value:"MongoDB Drivers Overview",id:"mongodb-drivers-overview",level:2},{value:"Driver Architecture",id:"driver-architecture",level:2},{value:"Connection Pooling",id:"connection-pooling",level:2},{value:"BSON Handling in Drivers",id:"bson-handling-in-drivers",level:2},{value:"Error Semantics",id:"error-semantics",level:2},{value:"Notes",id:"notes",level:2},{value:"Caveats",id:"caveats",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"mongodb-drivers-overview",children:"MongoDB Drivers Overview"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Language-specific clients implementing the MongoDB Wire Protocol"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Official drivers maintained by MongoDB"}),"\n",(0,s.jsx)(n.li,{children:"Responsible for connections, retries, BSON encoding"}),"\n",(0,s.jsx)(n.li,{children:"Abstract server topology (standalone / RS / sharded)"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Examples (Node.js)"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { MongoClient } from 'mongodb';\n\nconst client = new MongoClient('mongodb://localhost:27017');\nawait client.connect();\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"driver-architecture",children:"Driver Architecture"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Internal layers handling topology, monitoring, and operations"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"SDAM: Server Discovery and Monitoring"}),"\n",(0,s.jsx)(n.li,{children:"Logical sessions managed client-side"}),"\n",(0,s.jsx)(n.li,{children:"Async, non-blocking I/O"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Examples (Node.js)"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"// Inspect topology description\nconst topology = client.topology;\nconsole.log(topology.description.type); // Single | ReplicaSet | Sharded\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"connection-pooling",children:"Connection Pooling"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Reuse of TCP connections for performance and scalability"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Pool per server"}),"\n",(0,s.jsx)(n.li,{children:"Bounded by maxPoolSize"}),"\n",(0,s.jsx)(n.li,{children:"Prevents connection storms"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Examples (Node.js)"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"const client = new MongoClient(uri, {\n  maxPoolSize: 50,      // number\n  minPoolSize: 5,       // number\n  maxIdleTimeMS: 30000, // number\n});\nawait client.connect();\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"bson-handling-in-drivers",children:"BSON Handling in Drivers"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Binary encoding layer between application objects and MongoDB"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"BSON adds type richness over JSON"}),"\n",(0,s.jsx)(n.li,{children:"ObjectId generated client-side"}),"\n",(0,s.jsx)(n.li,{children:"Driver handles serialization"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Examples (Node.js)"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"import { ObjectId } from 'mongodb';\n\nconst doc = {\n  _id: new ObjectId(),\n  createdAt: new Date(),\n  active: true,\n};\nawait db.collection('users').insertOne(doc);\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"error-semantics",children:"Error Semantics"}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"Mapping server and network failures to driver exceptions"}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Network errors are retryable"}),"\n",(0,s.jsx)(n.li,{children:"WriteErrors vs WriteConcernErrors"}),"\n",(0,s.jsx)(n.li,{children:"Error labels drive retry logic"}),"\n"]}),"\n",(0,s.jsxs)(r,{children:[(0,s.jsx)("summary",{children:"Examples (Node.js)"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-js",children:"try {\n  await db.collection('users').insertOne({ _id: 1 });\n} catch (err) {\n  if (err.code === 11000) {\n    console.log('Duplicate key error');\n  }\n  if (err.hasErrorLabel?.('TransientTransactionError')) {\n    console.log('Retryable transaction error');\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Drivers hide topology complexity"}),"\n",(0,s.jsx)(n.li,{children:"Connection pooling is critical for performance"}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"caveats",children:"Caveats"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Misconfigured pools cause latency spikes"}),"\n",(0,s.jsx)(n.li,{children:"Error handling must respect retry semantics"}),"\n",(0,s.jsx)(n.li,{children:"Driver up"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}}}]);