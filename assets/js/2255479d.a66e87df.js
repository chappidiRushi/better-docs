"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[3005],{7133(e,n,i){i.r(n),i.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>l,toc:()=>o});const l=JSON.parse('{"id":"Angular/internationalization","title":"Internationalization (i18n)","description":"Built\u2011in Angular i18n using @angular/localize with runtime locale switching support","source":"@site/docs/Angular/internationalization.md","sourceDirName":"Angular","slug":"/Angular/internationalization","permalink":"/better-docs/docs/Angular/internationalization","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/Angular/internationalization.md","tags":[],"version":"current","sidebarPosition":29,"frontMatter":{"id":"internationalization","title":"Internationalization (i18n)","sidebar_position":29},"sidebar":"tutorialSidebar","previous":{"title":"Service Workers & PWA","permalink":"/better-docs/docs/Angular/service-workers-pwa"},"next":{"title":"Mongo","permalink":"/better-docs/docs/mongo/"}}');var r=i(4848),s=i(8453);const a={id:"internationalization",title:"Internationalization (i18n)",sidebar_position:29},t="Internationalization (i18n)",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Setup (Standalone)",id:"setup-standalone",level:2},{value:"Marking Text for Translation",id:"marking-text-for-translation",level:2},{value:"Basic Text",id:"basic-text",level:3},{value:"With Description &amp; Meaning (Helps Translators)",id:"with-description--meaning-helps-translators",level:3},{value:"Interpolations",id:"interpolations",level:3},{value:"Attributes",id:"attributes",level:3},{value:"Plural &amp; Gender (ICU Syntax)",id:"plural--gender-icu-syntax",level:2},{value:"Plural",id:"plural",level:3},{value:"Select (e.g., Gender)",id:"select-eg-gender",level:3},{value:"Extracting Messages",id:"extracting-messages",level:2},{value:"Loading Translations (Runtime)",id:"loading-translations-runtime",level:2},{value:"Registering Locale Data (Dates, Numbers, Currency)",id:"registering-locale-data-dates-numbers-currency",level:2},{value:"Locale\u2011Aware Pipes",id:"localeaware-pipes",level:2},{value:"DatePipe",id:"datepipe",level:3},{value:"CurrencyPipe",id:"currencypipe",level:3},{value:"DecimalPipe / PercentPipe",id:"decimalpipe--percentpipe",level:3},{value:"Multiple Locales (Build + Runtime)",id:"multiple-locales-build--runtime",level:2},{value:"Build\u2011Time (Legacy \u2014 Rebuild per locale)",id:"buildtime-legacy--rebuild-per-locale",level:3},{value:"Runtime (Recommended)",id:"runtime-recommended",level:3},{value:"Translating Code Strings (<code>$localize</code>)",id:"translating-code-strings-localize",level:2},{value:"Parameterized Messages (Templates)",id:"parameterized-messages-templates",level:2},{value:"Tagged Meaning &amp; Context",id:"tagged-meaning--context",level:2},{value:"Dynamic Locale Switching Strategy",id:"dynamic-locale-switching-strategy",level:2},{value:"Testing Translations",id:"testing-translations",level:2},{value:"Common Pitfalls",id:"common-pitfalls",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...e.components},{Details:i}=n;return i||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"internationalization-i18n",children:"Internationalization (i18n)"})}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["Built\u2011in Angular i18n using ",(0,r.jsx)(n.strong,{children:"@angular/localize"})," with runtime locale switching support"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Internationalization (i18n)"})," prepares your app for multiple languages."]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Angular provides:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Template translation via ",(0,r.jsx)(n.code,{children:"i18n"})," attributes"]}),"\n",(0,r.jsx)(n.li,{children:"Message extraction \u2192 translation files (XLIFF)"}),"\n",(0,r.jsx)(n.li,{children:"ICU plural & gender rules"}),"\n",(0,r.jsx)(n.li,{children:"Locale\u2011aware pipes (date / currency / number)"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsxs)(n.p,{children:["Works in ",(0,r.jsx)(n.strong,{children:"standalone apps"}),", supports ",(0,r.jsx)(n.strong,{children:"multiple locales"})," & ",(0,r.jsx)(n.strong,{children:"runtime switching"}),"."]}),"\n"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"setup-standalone",children:"Setup (Standalone)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"// main.ts\nimport { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideI18n, withLocaleId, withTranslations } from '@angular/localize/init';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideI18n(\n      withLocaleId('en'),              // default locale\n      withTranslations('en', {}),      // translations loaded at build/runtime\n    )\n  ]\n});\n"})})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["\u2714\ufe0f Angular 17+ supports ",(0,r.jsx)(n.strong,{children:"runtime translation loading"})," \u2014 no rebuild required per locale."]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"marking-text-for-translation",children:"Marking Text for Translation"}),"\n",(0,r.jsx)(n.h3,{id:"basic-text",children:"Basic Text"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<h1 i18n>Welcome</h1>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"with-description--meaning-helps-translators",children:"With Description & Meaning (Helps Translators)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<h1 i18n="@@welcomeHeading|Header shown on home page">Welcome</h1>\n'})})]}),"\n",(0,r.jsx)(n.p,{children:"Format:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"meaning|description@@customId\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"interpolations",children:"Interpolations"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p i18n>Hello {{ name }}!</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"attributes",children:"Attributes"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button i18n-title title="Save the form">Save</button>\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"plural--gender-icu-syntax",children:"Plural & Gender (ICU Syntax)"}),"\n",(0,r.jsx)(n.h3,{id:"plural",children:"Plural"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p i18n>{ itemsCount, plural,\n  =0 {No items}\n  =1 {One item}\n  other {{ itemsCount }} items\n}</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"select-eg-gender",children:"Select (e.g., Gender)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p i18n>{ gender, select,\n  male {He}\n  female {She}\n  other {They}\n} liked your post.</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"extracting-messages",children:"Extracting Messages"}),"\n",(0,r.jsx)(n.p,{children:"Use Angular CLI:"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"ng extract-i18n --format=xlf --output-path=src/i18n\n"})})]}),"\n",(0,r.jsx)(n.p,{children:"Creates e.g.:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"src/i18n/messages.xlf\n"})}),"\n",(0,r.jsx)(n.p,{children:"Duplicate per locale:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"messages.fr.xlf\nmessages.es.xlf\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Translate the ",(0,r.jsx)(n.code,{children:"<target>"})," tags."]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"loading-translations-runtime",children:"Loading Translations (Runtime)"}),"\n",(0,r.jsx)(n.p,{children:"You can dynamically load JSON/XLIFF."}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { provideI18n, withLocaleId, withTranslations } from '@angular/localize/init';\n\nexport const appConfig = {\n  providers: [\n    provideI18n(\n      withLocaleId('en'),\n      withTranslations('en', enTranslations),\n      withTranslations('fr', frTranslations),\n    )\n  ]\n};\n"})})]}),"\n",(0,r.jsx)(n.p,{children:"Then switch locale:"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { inject } from '@angular/core';\nimport { I18nService } from '@angular/localize';\n\nconst i18n = inject(I18nService);\ni18n.setLocale('fr');\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"registering-locale-data-dates-numbers-currency",children:"Registering Locale Data (Dates, Numbers, Currency)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { registerLocaleData } from '@angular/common';\nimport localeFr from '@angular/common/locales/fr';\n\nregisterLocaleData(localeFr);\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"localeaware-pipes",children:"Locale\u2011Aware Pipes"}),"\n",(0,r.jsx)(n.h3,{id:"datepipe",children:"DatePipe"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p>{{ today | date:'longDate' }}</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"currencypipe",children:"CurrencyPipe"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p>{{ price | currency:'EUR':'symbol' }}</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"decimalpipe--percentpipe",children:"DecimalPipe / PercentPipe"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p>{{ rating | number:'1.0-2' }}</p>\n<p>{{ ratio | percent }}</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"multiple-locales-build--runtime",children:"Multiple Locales (Build + Runtime)"}),"\n",(0,r.jsx)(n.h3,{id:"buildtime-legacy--rebuild-per-locale",children:"Build\u2011Time (Legacy \u2014 Rebuild per locale)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-jsonc",children:'// angular.json\n{\n  "projects": {\n    "app": {\n      "i18n": {\n        "sourceLocale": "en-US",\n        "locales": {\n          "fr": "src/i18n/messages.fr.xlf",\n          "es": "src/i18n/messages.es.xlf"\n        }\n      }\n    }\n  }\n}\n'})}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"ng build --localize\n"})})]}),"\n",(0,r.jsx)(n.h3,{id:"runtime-recommended",children:"Runtime (Recommended)"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"One build \u2192 load translations dynamically"}),"\n",(0,r.jsxs)(n.li,{children:["Use ",(0,r.jsx)(n.code,{children:"provideI18n()"})," with ",(0,r.jsx)(n.code,{children:"withTranslations()"})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"translating-code-strings-localize",children:["Translating Code Strings (",(0,r.jsx)(n.code,{children:"$localize"}),")"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { $localize } from '@angular/localize';\n\nconst message = $localize`Hello, ${name}!`;\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"parameterized-messages-templates",children:"Parameterized Messages (Templates)"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<p i18n>Logged in as {{ username }}</p>\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"tagged-meaning--context",children:"Tagged Meaning & Context"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<button i18n="@@saveButton|Action to save form">Save</button>\n'})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"dynamic-locale-switching-strategy",children:"Dynamic Locale Switching Strategy"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Store current locale (signal/store/service)"}),"\n",(0,r.jsx)(n.li,{children:"Load translation file"}),"\n",(0,r.jsxs)(n.li,{children:["Call ",(0,r.jsx)(n.code,{children:"setLocale()"})]}),"\n",(0,r.jsx)(n.li,{children:"Register locale data when first used"}),"\n"]}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { effect, signal } from '@angular/core';\nimport { I18nService } from '@angular/localize';\nimport { registerLocaleData } from '@angular/common';\n\nconst locale = signal<'en' | 'fr'>('en');\nconst i18n = inject(I18nService);\n\neffect(async () => {\n  const l = locale();\n  if (l === 'fr') {\n    const { default: fr } = await import('@angular/common/locales/fr');\n    registerLocaleData(fr);\n  }\n  i18n.setLocale(l);\n});\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"testing-translations",children:"Testing Translations"}),"\n",(0,r.jsxs)(i,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-ts",children:"import { render } from '@testing-library/angular';\n\nit('renders translated text', async () => {\n  const { getByText } = await render(AppComponent, {\n    providers: [\n      provideI18n(withLocaleId('fr'), withTranslations('fr', frTranslations))\n    ]\n  });\n\n  getByText('Bienvenue');\n});\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-pitfalls",children:"Common Pitfalls"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\u274c Forgetting ",(0,r.jsx)(n.code,{children:"registerLocaleData()"})," \u2192 wrong date/number formats"]}),"\n",(0,r.jsx)(n.li,{children:"\u274c Mixing runtime + build\u2011time i18n incorrectly"}),"\n",(0,r.jsxs)(n.li,{children:["\u274c Missing ",(0,r.jsx)(n.code,{children:"i18n-*"})," attribute for attributes"]}),"\n",(0,r.jsxs)(n.li,{children:["\u274c Not providing unique ",(0,r.jsx)(n.code,{children:"@@ids"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,i){i.d(n,{R:()=>a,x:()=>t});var l=i(6540);const r={},s=l.createContext(r);function a(e){const n=l.useContext(s);return l.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),l.createElement(s.Provider,{value:n},e.children)}}}]);