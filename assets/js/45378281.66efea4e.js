"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[8383],{8453(e,s,n){n.d(s,{R:()=>l,x:()=>c});var r=n(6540);const t={},o=r.createContext(t);function l(e){const s=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),r.createElement(o.Provider,{value:s},e.children)}},9309(e,s,n){n.r(s),n.d(s,{assets:()=>i,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Node/http","title":"http / https Modules","description":"Build HTTP/HTTPS servers and clients","source":"@site/docs/Node/http.md","sourceDirName":"Node","slug":"/Node/http","permalink":"/docs/Node/http","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Node/http.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"fs Module","permalink":"/docs/Node/fs"},"next":{"title":"os Module","permalink":"/docs/Node/os"}}');var t=n(4848),o=n(8453);const l={},c="http / https Modules",i={},d=[{value:"Import (ESM)",id:"import-esm",level:2},{value:"Core Classes",id:"core-classes",level:2},{value:"Server Creation",id:"server-creation",level:2},{value:"Server Methods",id:"server-methods",level:2},{value:"Request (Client)",id:"request-client",level:2},{value:"ClientRequest Methods",id:"clientrequest-methods",level:2},{value:"IncomingMessage (Request / Response)",id:"incomingmessage-request--response",level:2},{value:"ServerResponse Methods",id:"serverresponse-methods",level:2},{value:"Agent",id:"agent",level:2},{value:"Events",id:"events",level:2},{value:"Notes",id:"notes",level:2}];function a(e){const s={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,o.R)(),...e.components},{Details:n}=s;return n||function(e,s){throw new Error("Expected "+(s?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsxs)(s.h1,{id:"http--https-modules",children:[(0,t.jsx)(s.code,{children:"http"})," / ",(0,t.jsx)(s.code,{children:"https"})," Modules"]})}),"\n",(0,t.jsxs)(s.blockquote,{children:["\n",(0,t.jsx)(s.p,{children:"Build HTTP/HTTPS servers and clients"}),"\n"]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"import-esm",children:"Import (ESM)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"import * as http from 'node:http';\nimport * as https from 'node:https';\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"import { createServer, request } from 'node:http';\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"core-classes",children:"Core Classes"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Incoming request (readable stream)\nhttp.IncomingMessage           // class\n// Server response (writable stream)\nhttp.ServerResponse            // class\n// HTTP server\nhttp.Server                    // class\n// HTTP client request\nhttp.ClientRequest             // class\n// HTTP agent (connection pooling)\nhttp.Agent                     // class\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"new http.Agent({ keepAlive: true });\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"server-creation",children:"Server Creation"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Create HTTP server\nhttp.createServer(opts?, handler?)     // (object?, Function?) \u2192 Server\n// Create HTTPS server\nhttps.createServer(opts, handler?)     // (object, Function?) \u2192 Server\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"http.createServer({ keepAliveTimeout: 5000 }, (req, res) => {\n  res.end('ok');\n});\n\nhttps.createServer({\n  key: 'PRIVATE_KEY',\n  cert: 'CERT'\n}, (req, res) => {\n  res.end('secure');\n});\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"server-methods",children:"Server Methods"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Start listening\nserver.listen(port, host?, backlog?, cb?) // (number, string?, number?, Function?) \u2192 Server\n// Stop server\nserver.close(cb?)                         // (Function?) \u2192 Server\n// Track connections\nserver.on('request', fn)                 // (req, res) \u2192 void\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"server.listen(3000, '0.0.0.0', 511, () => {});\nserver.close(() => {});\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"request-client",children:"Request (Client)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Make HTTP request\nhttp.request(url|opts, opts?, cb?)    // (string|object, object?, Function?) \u2192 ClientRequest\n// Make GET request\nhttp.get(url|opts, opts?, cb?)        // (string|object, object?, Function?) \u2192 ClientRequest\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"http.request({\n  hostname: 'example.com',\n  port: 80,\n  method: 'POST',\n  path: '/api',\n  headers: { 'Content-Type': 'application/json' }\n}, res => {});\n\nhttp.get('http://example.com', res => {});\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"clientrequest-methods",children:"ClientRequest Methods"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Write request body\nreq.write(chunk, enc?, cb?)         // (string|Buffer, string?, Function?) \u2192 boolean\n// Finish request\nreq.end(data?, enc?, cb?)            // (string|Buffer?, string?, Function?) \u2192 void\n// Abort request\nreq.abort()                          // () \u2192 void\n// Set timeout\nreq.setTimeout(ms, cb?)              // (number, Function?) \u2192 void\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"req.write('data', 'utf8', () => {});\nreq.end(null, null, () => {});\nreq.setTimeout(5000, () => {});\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"incomingmessage-request--response",children:"IncomingMessage (Request / Response)"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// HTTP method\nmsg.method                   // string\n// URL path\nmsg.url                      // string\n// Headers map\nmsg.headers                  // object\n// Status code (response only)\nmsg.statusCode               // number\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"req.method;\nreq.url;\nreq.headers;\nres.statusCode;\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"serverresponse-methods",children:"ServerResponse Methods"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Set status code\nres.statusCode = code            // number\n// Set response header\nres.setHeader(name, value)       // (string, string|string[]) \u2192 void\n// Write response body\nres.write(chunk, enc?)           // (string|Buffer, string?) \u2192 boolean\n// End response\nres.end(data?, enc?)             // (string|Buffer?, string?) \u2192 void\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"res.statusCode = 200;\nres.setHeader('Content-Type', 'text/plain');\nres.write('hello', 'utf8');\nres.end('done', 'utf8');\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"agent",children:"Agent"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Create connection pool\nnew http.Agent(opts?)            // (object?) \u2192 Agent\n// Destroy sockets\nagent.destroy()                  // () \u2192 void\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"const agent = new http.Agent({ keepAlive: true, maxSockets: 10 });\nagent.destroy();\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"events",children:"Events"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"// Request received\nserver.on('request', fn)     // (req, res) \u2192 void\n// Client response\nreq.on('response', fn)       // (IncomingMessage) \u2192 void\n// Error handling\nreq.on('error', fn)          // (Error) \u2192 void\n"})}),"\n",(0,t.jsxs)(n,{children:[(0,t.jsx)("summary",{children:"Examples"}),(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-js",children:"server.on('request', () => {});\nreq.on('response', res => {});\nreq.on('error', err => {});\n"})})]}),"\n",(0,t.jsx)(s.hr,{}),"\n",(0,t.jsx)(s.h2,{id:"notes",children:"Notes"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"https"})," adds TLS on top of ",(0,t.jsx)(s.code,{children:"http"})]}),"\n",(0,t.jsxs)(s.li,{children:["Use ",(0,t.jsx)(s.code,{children:"Agent"})," for connection reuse"]}),"\n",(0,t.jsx)(s.li,{children:"Streams power request/response bodies"}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}}}]);