"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[9494],{893(e,n,s){s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>t,default:()=>x,frontMatter:()=>l,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"html/scripting-and-html","title":"Scripting and HTML","description":"-----------------","source":"@site/docs/html/Script And HTML.md","sourceDirName":"html","slug":"/html/scripting-and-html","permalink":"/better-docs/docs/html/scripting-and-html","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/html/Script And HTML.md","tags":[],"version":"current","sidebarPosition":17,"frontMatter":{"id":"scripting-and-html","title":"Scripting and HTML","sidebar_position":17},"sidebar":"tutorialSidebar","previous":{"title":"Interactive Elements","permalink":"/better-docs/docs/html/interactive-elements"},"next":{"title":"Template and Reuse Mechanisms","permalink":"/better-docs/docs/html/template-and-reuse-mechanisms"}}');var r=s(4848),c=s(8453);const l={id:"scripting-and-html",title:"Scripting and HTML",sidebar_position:17},t=void 0,d={},o=[{value:"Unified Example (All Script Forms)",id:"unified-example-all-script-forms",level:2},{value:"<code>&lt;script&gt;</code> Element Deep Dive",id:"script-element-deep-dive",level:2},{value:"Script Types",id:"script-types",level:2},{value:"Classic Scripts",id:"classic-scripts",level:3},{value:"Module Scripts",id:"module-scripts",level:3},{value:"Import Maps",id:"import-maps",level:3},{value:"Async vs Defer vs Blocking",id:"async-vs-defer-vs-blocking",level:2},{value:"Inline vs External Scripts",id:"inline-vs-external-scripts",level:2},{value:"Execution Order Guarantees",id:"execution-order-guarantees",level:2},{value:"Interaction with DOM Parsing",id:"interaction-with-dom-parsing",level:2},{value:"Security Restrictions",id:"security-restrictions",level:2},{value:"Mental Model (Interview Grade)",id:"mental-model-interview-grade",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,c.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"unified-example-all-script-forms",children:"Unified Example (All Script Forms)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'\x3c!-- CLASSIC BLOCKING SCRIPT --\x3e\n<script src="app.js"><\/script> \x3c!-- blocks parsing, executes immediately --\x3e\n\n\x3c!-- DEFERRED SCRIPT --\x3e\n<script src="defer.js" defer><\/script> \x3c!-- executes after parse, in order --\x3e\n\n\x3c!-- ASYNC SCRIPT --\x3e\n<script src="async.js" async><\/script> \x3c!-- executes ASAP, order not guaranteed --\x3e\n\n\x3c!-- INLINE SCRIPT --\x3e\n<script>\n  console.log(\'inline\'); // executes immediately when encountered\n<\/script>\n\n\x3c!-- MODULE SCRIPT --\x3e\n<script type="module" src="main.mjs"><\/script> \x3c!-- deferred by default, strict mode --\x3e\n\n\x3c!-- INLINE MODULE --\x3e\n<script type="module">\n  import { x } from \'./dep.mjs\';\n<\/script>\n\n\x3c!-- IMPORT MAP --\x3e\n<script type="importmap">\n{\n  "imports": {\n    "lodash": "/vendor/lodash.mjs"\n  }\n}\n<\/script>\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"script-element-deep-dive",children:[(0,r.jsx)(n.code,{children:"<script>"})," Element Deep Dive"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Executes JavaScript in document context"}),"\n",(0,r.jsx)(n.li,{children:"Placement affects execution timing"}),"\n",(0,r.jsx)(n.li,{children:"Blocking by default (classic scripts)"}),"\n",(0,r.jsx)(n.li,{children:"May trigger network fetch"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Non-universal attributes:"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"src"})," \u2014 external script URL"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"type"})," \u2014 MIME / script type (",(0,r.jsx)(n.code,{children:"text/javascript"}),", ",(0,r.jsx)(n.code,{children:"module"}),", ",(0,r.jsx)(n.code,{children:"importmap"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"async"})," \u2014 async fetch + execute (classic only)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"defer"})," \u2014 deferred execution (classic only)"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"crossorigin"})," \u2014 ",(0,r.jsx)(n.code,{children:"anonymous | use-credentials"})]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"integrity"})," \u2014 Subresource Integrity hash"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"referrerpolicy"})," \u2014 referrer control"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"nomodule"})," \u2014 ignored by module-capable browsers"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsxs)(n.em,{children:[(0,r.jsx)(n.code,{children:"<script>"})," is a parser-affecting, execution-triggering element."]})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"script-types",children:"Script Types"}),"\n",(0,r.jsx)(n.h3,{id:"classic-scripts",children:"Classic Scripts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Default if ",(0,r.jsx)(n.code,{children:"type"})," omitted or ",(0,r.jsx)(n.code,{children:"text/javascript"})]}),"\n",(0,r.jsx)(n.li,{children:"Share global scope"}),"\n",(0,r.jsxs)(n.li,{children:["Can use ",(0,r.jsx)(n.code,{children:"document.write"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"module-scripts",children:"Module Scripts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:'type="module"'})}),"\n",(0,r.jsx)(n.li,{children:"Deferred automatically"}),"\n",(0,r.jsx)(n.li,{children:"Strict mode enforced"}),"\n",(0,r.jsx)(n.li,{children:"Scoped (no globals)"}),"\n",(0,r.jsxs)(n.li,{children:["Support ",(0,r.jsx)(n.code,{children:"import"})," / ",(0,r.jsx)(n.code,{children:"export"})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"import-maps",children:"Import Maps"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Declarative module specifier resolution"}),"\n",(0,r.jsxs)(n.li,{children:["Must appear ",(0,r.jsx)(n.strong,{children:"before"})," module scripts"]}),"\n",(0,r.jsx)(n.li,{children:"No dynamic updates"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"Modules change loading, scoping, and execution semantics entirely."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"async-vs-defer-vs-blocking",children:"Async vs Defer vs Blocking"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Mode"}),(0,r.jsx)(n.th,{children:"Parsing"}),(0,r.jsx)(n.th,{children:"Execution Time"}),(0,r.jsx)(n.th,{children:"Order Guaranteed"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"blocking"}),(0,r.jsx)(n.td,{children:"stops"}),(0,r.jsx)(n.td,{children:"immediately"}),(0,r.jsx)(n.td,{children:"yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"defer"}),(0,r.jsx)(n.td,{children:"continues"}),(0,r.jsx)(n.td,{children:"after parse"}),(0,r.jsx)(n.td,{children:"yes"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"async"}),(0,r.jsx)(n.td,{children:"continues"}),(0,r.jsx)(n.td,{children:"ASAP"}),(0,r.jsx)(n.td,{children:"no"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"module"}),(0,r.jsx)(n.td,{children:"continues"}),(0,r.jsx)(n.td,{children:"after parse"}),(0,r.jsx)(n.td,{children:"yes (module graph)"})]})]})]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"Async trades determinism for speed; defer trades speed for order."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"inline-vs-external-scripts",children:"Inline vs External Scripts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Inline:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No network request"}),"\n",(0,r.jsxs)(n.li,{children:["Affected by CSP (",(0,r.jsx)(n.code,{children:"unsafe-inline"}),")"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"External:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Cacheable"}),"\n",(0,r.jsx)(n.li,{children:"Supports SRI"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"External scripts are safer and cacheable; inline scripts are immediate."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"execution-order-guarantees",children:"Execution Order Guarantees"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Blocking scripts: DOM-order"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Deferred scripts: DOM-order after parse"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Async scripts: network-order"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Modules:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Dependency graph order"}),"\n",(0,r.jsx)(n.li,{children:"Depth-first execution"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"Only defer and modules guarantee order without blocking."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"interaction-with-dom-parsing",children:"Interaction with DOM Parsing"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Parser pauses for blocking scripts"}),"\n",(0,r.jsx)(n.li,{children:"DOM may be incomplete during execution"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"document.write"})," mutates input stream"]}),"\n",(0,r.jsx)(n.li,{children:"Deferred / module scripts see full DOM"}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"Scripts can halt, mutate, or observe the parser."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"security-restrictions",children:"Security Restrictions"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"Same-origin policy applies"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"CORS enforced for modules"}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"CSP controls:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"script-src"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"unsafe-inline"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"nonce-*"})}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.li,{children:["\n",(0,r.jsx)(n.p,{children:"SRI ensures content integrity"}),"\n"]}),"\n"]}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsxs)(n.p,{children:["One-liner: ",(0,r.jsx)(n.em,{children:"Script execution is one of the most restricted operations in HTML."})]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mental-model-interview-grade",children:"Mental Model (Interview Grade)"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"HTML parsing and JavaScript execution are interleaved processes governed by strict ordering, security, and loading rules \u2014 misuse causes race conditions and jank."})}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(h,{...e})}):h(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>t});var i=s(6540);const r={},c=i.createContext(r);function l(e){const n=i.useContext(c);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(c.Provider,{value:n},e.children)}}}]);