"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[9349],{4234(e,n,t){t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>i,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"Angular/life-cycle","title":"Component Lifecycle","description":"When and how Angular creates, updates, and destroys a component","source":"@site/docs/Angular/life-cycle.md","sourceDirName":"Angular","slug":"/Angular/life-cycle","permalink":"/better-docs/docs/Angular/life-cycle","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Angular/life-cycle.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Internationalization (i18n)","permalink":"/better-docs/docs/Angular/internationalization"},"next":{"title":"NgRx (State Management)","permalink":"/better-docs/docs/Angular/ngrx"}}');var s=t(4848),c=t(8453);const o={},i="Component Lifecycle",l={},d=[{value:"Constructor",id:"constructor",level:2},{value:"<code>ngOnChanges</code>",id:"ngonchanges",level:2},{value:"<code>ngOnInit</code>",id:"ngoninit",level:2},{value:"<code>ngDoCheck</code>",id:"ngdocheck",level:2},{value:"<code>ngAfterContentInit</code>",id:"ngaftercontentinit",level:2},{value:"<code>ngAfterContentChecked</code>",id:"ngaftercontentchecked",level:2},{value:"<code>ngAfterViewInit</code>",id:"ngafterviewinit",level:2},{value:"<code>ngAfterViewChecked</code>",id:"ngafterviewchecked",level:2},{value:"<code>ngOnDestroy</code>",id:"ngondestroy",level:2},{value:"Lifecycle Execution Order",id:"lifecycle-execution-order",level:2},{value:"Modern Cleanup Pattern (Angular 16+)",id:"modern-cleanup-pattern-angular-16",level:2},{value:"Tips &amp; Tricks to Remember Lifecycle Names and Order",id:"tips--tricks-to-remember-lifecycle-names-and-order",level:2},{value:"1. Lifecycle Flow Mental Model",id:"1-lifecycle-flow-mental-model",level:3},{value:"2. Name Pattern Rule",id:"2-name-pattern-rule",level:3},{value:"3. Content vs View Shortcut",id:"3-content-vs-view-shortcut",level:3},{value:"4. Init vs Checked",id:"4-init-vs-checked",level:3},{value:"5. One-Line Mnemonic (Order)",id:"5-one-line-mnemonic-order",level:3},{value:"6. Practical Memory Tip",id:"6-practical-memory-tip",level:3}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,c.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"component-lifecycle",children:"Component Lifecycle"})}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsx)(n.p,{children:"When and how Angular creates, updates, and destroys a component"}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"constructor",children:"Constructor"}),"\n",(0,s.jsx)(n.p,{children:"Runs when the component class is instantiated."}),"\n",(0,s.jsxs)(n.p,{children:["Used only for ",(0,s.jsx)(n.strong,{children:"dependency injection and simple initialization"}),". No bindings, inputs, or DOM are available."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-demo',\n  standalone: true\n})\nexport class DemoComponent {\n  constructor(private service: DataService) {}\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngonchanges",children:(0,s.jsx)(n.code,{children:"ngOnChanges"})}),"\n",(0,s.jsxs)(n.p,{children:["Runs when one or more ",(0,s.jsx)(n.code,{children:"@Input()"})," values change."]}),"\n",(0,s.jsxs)(n.p,{children:["Called ",(0,s.jsxs)(n.strong,{children:["before ",(0,s.jsx)(n.code,{children:"ngOnInit"})]})," and again on every subsequent input update."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-user',\n  standalone: true\n})\nexport class UserComponent implements OnChanges {\n  @Input() id!: number;            // number\n\n  ngOnChanges(changes: SimpleChanges) {\n    console.log(changes['id'].currentValue);\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngoninit",children:(0,s.jsx)(n.code,{children:"ngOnInit"})}),"\n",(0,s.jsx)(n.p,{children:"Runs once after the first input values are set."}),"\n",(0,s.jsxs)(n.p,{children:["Used for ",(0,s.jsx)(n.strong,{children:"initialization logic"}),", data loading, and subscriptions."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-dashboard',\n  standalone: true\n})\nexport class DashboardComponent implements OnInit {\n  data!: string[];\n\n  ngOnInit() {\n    this.data = ['a', 'b', 'c'];    // any[] | Observable | Promise\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngdocheck",children:(0,s.jsx)(n.code,{children:"ngDoCheck"})}),"\n",(0,s.jsx)(n.p,{children:"Runs on every change detection cycle."}),"\n",(0,s.jsxs)(n.p,{children:["Used for ",(0,s.jsx)(n.strong,{children:"custom change detection logic"})," when default Angular checks are insufficient."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-check',\n  standalone: true\n})\nexport class CheckComponent implements DoCheck {\n  ngDoCheck() {\n    // manual dirty checking\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngaftercontentinit",children:(0,s.jsx)(n.code,{children:"ngAfterContentInit"})}),"\n",(0,s.jsxs)(n.p,{children:["Runs once after projected content (",(0,s.jsx)(n.code,{children:"ng-content"}),") is initialized."]}),"\n",(0,s.jsxs)(n.p,{children:["Used when the component depends on ",(0,s.jsx)(n.strong,{children:"content-projected children"}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-wrapper',\n  standalone: true,\n  template: `<ng-content />`\n})\nexport class WrapperComponent implements AfterContentInit {\n  ngAfterContentInit() {}\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngaftercontentchecked",children:(0,s.jsx)(n.code,{children:"ngAfterContentChecked"})}),"\n",(0,s.jsx)(n.p,{children:"Runs after every check of projected content."}),"\n",(0,s.jsxs)(n.p,{children:["Used for reacting to ",(0,s.jsx)(n.strong,{children:"content updates"}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-content-check',\n  standalone: true\n})\nexport class ContentCheckComponent implements AfterContentChecked {\n  ngAfterContentChecked() {}\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngafterviewinit",children:(0,s.jsx)(n.code,{children:"ngAfterViewInit"})}),"\n",(0,s.jsx)(n.p,{children:"Runs once after the component\u2019s view and child views are initialized."}),"\n",(0,s.jsxs)(n.p,{children:["Safe place to access ",(0,s.jsxs)(n.strong,{children:[(0,s.jsx)(n.code,{children:"ViewChild"})," / DOM APIs"]}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-modal',\n  standalone: true,\n  template: `<div #panel></div>`\n})\nexport class ModalComponent implements AfterViewInit {\n  @ViewChild('panel') panel!: ElementRef; // ElementRef | TemplateRef\n\n  ngAfterViewInit() {\n    this.panel.nativeElement.focus();\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngafterviewchecked",children:(0,s.jsx)(n.code,{children:"ngAfterViewChecked"})}),"\n",(0,s.jsx)(n.p,{children:"Runs after every check of the component\u2019s view."}),"\n",(0,s.jsxs)(n.p,{children:["Used for ",(0,s.jsx)(n.strong,{children:"post-render logic"}),", avoid heavy work."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-view-check',\n  standalone: true\n})\nexport class ViewCheckComponent implements AfterViewChecked {\n  ngAfterViewChecked() {}\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"ngondestroy",children:(0,s.jsx)(n.code,{children:"ngOnDestroy"})}),"\n",(0,s.jsx)(n.p,{children:"Runs just before the component is destroyed."}),"\n",(0,s.jsxs)(n.p,{children:["Used for ",(0,s.jsx)(n.strong,{children:"cleanup"}),": unsubscribe, remove listeners, cancel timers."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-timer',\n  standalone: true\n})\nexport class TimerComponent implements OnDestroy {\n  intervalId = setInterval(() => {}, 1000);\n\n  ngOnDestroy() {\n    clearInterval(this.intervalId);\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"lifecycle-execution-order",children:"Lifecycle Execution Order"}),"\n",(0,s.jsx)(n.p,{children:"Angular calls lifecycle hooks in this sequence:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"constructor"}),"\n",(0,s.jsx)(n.li,{children:"ngOnChanges"}),"\n",(0,s.jsx)(n.li,{children:"ngOnInit"}),"\n",(0,s.jsx)(n.li,{children:"ngDoCheck"}),"\n",(0,s.jsx)(n.li,{children:"ngAfterContentInit"}),"\n",(0,s.jsx)(n.li,{children:"ngAfterContentChecked"}),"\n",(0,s.jsx)(n.li,{children:"ngAfterViewInit"}),"\n",(0,s.jsx)(n.li,{children:"ngAfterViewChecked"}),"\n",(0,s.jsx)(n.li,{children:"ngOnDestroy"}),"\n"]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// ParentComponent\nimport { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-parent',\n  template: `\n    <h2>Parent</h2>\n\n    <button (click)=\"toggle()\">Toggle Child</button>\n    <button (click)=\"update()\">Update Input</button>\n\n    <app-child *ngIf=\"show\" [value]=\"count\">\n      <p>Projected content goes here</p>\n    </app-child>\n  `\n})\nexport class Parent {\n  show = true;\n  count = 1;\n\n  toggle() {\n    this.show = !this.show;\n  }\n\n  update() {\n    this.count++;\n  }\n}\n\n\n\n// Child Component\nimport {  Component,  OnInit,  OnChanges,  DoCheck,  AfterContentInit,  AfterContentChecked,  AfterViewInit,  AfterViewChecked,  OnDestroy,  SimpleChanges,  afterEveryRender,  afterNextRender,  Input} from '@angular/core';\n@Component({\n  selector: 'app-child',\n  template: `\n    <h3>Child value = {{ value }}</h3>\n    <ng-content></ng-content>\n  `\n})\nexport class Child implements\n  OnChanges,\n  OnInit,\n  DoCheck,\n  AfterContentInit,\n  AfterContentChecked,\n  AfterViewInit,\n  AfterViewChecked,\n  OnDestroy {\n\n  @Input() value = 0;\n\n  constructor() {\n    console.log('constructor');\n\n    afterEveryRender(() => {\n      console.log('afterEveryRender (every render)');\n    });\n\n    afterNextRender(() => {\n      console.log('afterNextRender (once after first render)');\n    });\n  }\n\n  ngOnChanges(changes: SimpleChanges) {\n    console.log('ngOnChanges', changes);\n  }\n\n  ngOnInit() {\n    console.log('ngOnInit');\n  }\n\n  ngDoCheck() {\n    console.log('ngDoCheck');\n  }\n\n  ngAfterContentInit() {\n    console.log('ngAfterContentInit');\n  }\n\n  ngAfterContentChecked() {\n    console.log('ngAfterContentChecked');\n  }\n\n  ngAfterViewInit() {\n    console.log('ngAfterViewInit');\n  }\n\n  ngAfterViewChecked() {\n    console.log('ngAfterViewChecked');\n  }\n\n  ngOnDestroy() {\n    console.log('ngOnDestroy');\n  }\n}\n\n\n\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"modern-cleanup-pattern-angular-16",children:"Modern Cleanup Pattern (Angular 16+)"}),"\n",(0,s.jsxs)(n.p,{children:["Use ",(0,s.jsx)(n.code,{children:"DestroyRef"})," for automatic teardown without implementing ",(0,s.jsx)(n.code,{children:"OnDestroy"}),"."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-stream',\n  standalone: true\n})\nexport class StreamComponent {\n  private destroyRef = inject(DestroyRef);\n\n  constructor() {\n    const id = setInterval(() => {}, 1000);\n\n    this.destroyRef.onDestroy(() => {\n      clearInterval(id);\n    });\n  }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"tips--tricks-to-remember-lifecycle-names-and-order",children:"Tips & Tricks to Remember Lifecycle Names and Order"}),"\n",(0,s.jsx)(n.h3,{id:"1-lifecycle-flow-mental-model",children:"1. Lifecycle Flow Mental Model"}),"\n",(0,s.jsxs)(n.p,{children:["Think in ",(0,s.jsx)(n.strong,{children:"phases"}),", not individual hooks:"]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Create"})," \u2192 constructor \u2192 ",(0,s.jsx)(n.code,{children:"OnChanges"})," \u2192 ",(0,s.jsx)(n.code,{children:"OnInit"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Check"})," \u2192 ",(0,s.jsx)(n.code,{children:"DoCheck"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Content"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterContentInit"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterContentChecked"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"View"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterViewInit"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterViewChecked"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Destroy"})," \u2192 ",(0,s.jsx)(n.code,{children:"OnDestroy"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If you remember the phases, the hook names become predictable."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"2-name-pattern-rule",children:"2. Name Pattern Rule"}),"\n",(0,s.jsx)(n.p,{children:"Every lifecycle hook follows this structure:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"ng + <When> + <What>\n"})}),"\n",(0,s.jsx)(n.p,{children:"Examples:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ngAfterViewInit"})," \u2192 after + view + init"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"ngAfterContentChecked"})," \u2192 after + content + checked"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["If you know ",(0,s.jsx)(n.strong,{children:"when"})," and ",(0,s.jsx)(n.strong,{children:"what"}),", you can reconstruct the name."]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"3-content-vs-view-shortcut",children:"3. Content vs View Shortcut"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Content"})," \u2192 ",(0,s.jsx)(n.code,{children:"ng-content"})," (projected from parent)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"View"})," \u2192 component\u2019s own template"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Rule of thumb:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Using ",(0,s.jsx)(n.code,{children:"ng-content"})," \u2192 Content hooks"]}),"\n",(0,s.jsxs)(n.li,{children:["Using ",(0,s.jsx)(n.code,{children:"ViewChild"})," \u2192 View hooks"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"4-init-vs-checked",children:"4. Init vs Checked"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Init"})," \u2192 runs ",(0,s.jsx)(n.strong,{children:"once"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"Checked"})," \u2192 runs ",(0,s.jsx)(n.strong,{children:"every change detection"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This applies to both Content and View hooks."}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"5-one-line-mnemonic-order",children:"5. One-Line Mnemonic (Order)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"Create \u2192 Change \u2192 Init \u2192 Check \u2192 Content \u2192 View \u2192 Destroy\n"})}),"\n",(0,s.jsx)(n.p,{children:"Expanded:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"constructor\nngOnChanges\nngOnInit\nngDoCheck\nngAfterContentInit\nngAfterContentChecked\nngAfterViewInit\nngAfterViewChecked\nngOnDestroy\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h3,{id:"6-practical-memory-tip",children:"6. Practical Memory Tip"}),"\n",(0,s.jsx)(n.p,{children:"If Angular lets you safely access it:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Inputs"})," \u2192 ",(0,s.jsx)(n.code,{children:"OnChanges"})," / ",(0,s.jsx)(n.code,{children:"OnInit"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Projected content"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterContent*"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"DOM / ViewChild"})," \u2192 ",(0,s.jsx)(n.code,{children:"AfterViewInit"})]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cleanup"})," \u2192 ",(0,s.jsx)(n.code,{children:"OnDestroy"})]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"If access is unsafe \u2192 you\u2019re too early in the lifecycle."})]})}function h(e={}){const{wrapper:n}={...(0,c.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>i});var r=t(6540);const s={},c=r.createContext(s);function o(e){const n=r.useContext(c);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(c.Provider,{value:n},e.children)}}}]);