"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[2556],{3923(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>d,default:()=>h,frontMatter:()=>l,metadata:()=>i,toc:()=>t});const i=JSON.parse('{"id":"mongo/mongodb-database-system","title":"MongoDB as a Database System","description":"----------------","source":"@site/docs/mongo/Intro.md","sourceDirName":"mongo","slug":"/mongo/mongodb-database-system","permalink":"/better-docs/docs/mongo/mongodb-database-system","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/mongo/Intro.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"id":"mongodb-database-system","title":"MongoDB as a Database System","sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Glossary","permalink":"/better-docs/docs/mongo/glossary"},"next":{"title":"BSON, Data Types, and Storage Model","permalink":"/better-docs/docs/mongo/mongodb-bson-storage"}}');var r=s(4848),o=s(8453);const l={id:"mongodb-database-system",title:"MongoDB as a Database System",sidebar_position:2},d=void 0,a={},t=[{value:"MongoDB Philosophy and Design Goals",id:"mongodb-philosophy-and-design-goals",level:2},{value:"MongoDB vs Relational Databases",id:"mongodb-vs-relational-databases",level:2},{value:"Document Model Tradeoffs",id:"document-model-tradeoffs",level:2},{value:"Use Cases and Anti-Use Cases",id:"use-cases-and-anti-use-cases",level:2},{value:"CAP and Consistency Guarantees",id:"cap-and-consistency-guarantees",level:2},{value:"Editions, Licensing, and Versioning",id:"editions-licensing-and-versioning",level:2},{value:"Notes",id:"notes",level:2},{value:"Caveats",id:"caveats",level:2}];function c(e){const n={blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"mongodb-philosophy-and-design-goals",children:"MongoDB Philosophy and Design Goals"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Flexible schema, horizontal scalability, developer productivity, operational simplicity"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Core ideas"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"JSON-like document model (BSON)"}),"\n",(0,r.jsx)(n.li,{children:"Scale-out via sharding, not scale-up"}),"\n",(0,r.jsx)(n.li,{children:"Strong defaults, tunable guarantees"}),"\n",(0,r.jsx)(n.li,{children:"Application-driven schema"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Schema flexibility (same collection, different shapes)\ndb.users.insertMany([\n  { _id: 1, name: 'A', email: 'a@x.com' },\n  { _id: 2, name: 'B', phones: ['+1', '+91'], meta: { verified: true } }\n]);\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"mongodb-vs-relational-databases",children:"MongoDB vs Relational Databases"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Document-first vs relation-first, runtime joins vs pre-embedded data"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Key differences"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"No fixed schema / migrations optional"}),"\n",(0,r.jsxs)(n.li,{children:["Joins via ",(0,r.jsx)(n.code,{children:"$lookup"})," (not default access path)"]}),"\n",(0,r.jsx)(n.li,{children:"Denormalization favored"}),"\n",(0,r.jsx)(n.li,{children:"No cross-document ACID by default (pre-4.0)"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Embedded model (MongoDB preferred)\n{\n  _id: ObjectId(),\n  orderId: 'O1',\n  user: { id: 10, name: 'Alex' },\n  items: [{ sku: 'P1', qty: 2 }]\n}\n\n// Relational-style lookup\n db.orders.aggregate([\n  { $lookup: {\n      from: 'users',\n      localField: 'userId',\n      foreignField: '_id',\n      as: 'user'\n  }}\n]);\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"document-model-tradeoffs",children:"Document Model Tradeoffs"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Read-optimized, write-amplified, bounded document size"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Pros"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Fewer round-trips"}),"\n",(0,r.jsx)(n.li,{children:"Atomic single-document updates"}),"\n",(0,r.jsx)(n.li,{children:"Natural object mapping"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Cons"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"16MB document limit"}),"\n",(0,r.jsx)(n.li,{children:"Data duplication"}),"\n",(0,r.jsx)(n.li,{children:"Complex updates for deeply nested arrays"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Atomic update on embedded document\ndb.accounts.updateOne(\n  { _id: 1 },\n  { $inc: { 'balance.available': -100 } }\n);\n\n// Risky unbounded array growth\n{ _id: 1, logs: [ /* unbounded */ ] }\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"use-cases-and-anti-use-cases",children:"Use Cases and Anti-Use Cases"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Best for operational workloads, not analytical-heavy joins"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Good fit"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Event stores"}),"\n",(0,r.jsx)(n.li,{children:"Content management"}),"\n",(0,r.jsx)(n.li,{children:"User profiles"}),"\n",(0,r.jsx)(n.li,{children:"IoT / time-series"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Poor fit"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Heavy ad-hoc joins"}),"\n",(0,r.jsx)(n.li,{children:"Highly normalized financial systems"}),"\n",(0,r.jsx)(n.li,{children:"Cross-row aggregate constraints"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Event-style workload\ndb.events.insertOne({\n  ts: ISODate(),\n  type: 'click',\n  userId: 123,\n  ctx: { page: '/home' }\n});\n\n// Anti-pattern: relational ledger\n// Requires multi-document consistency + joins\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"cap-and-consistency-guarantees",children:"CAP and Consistency Guarantees"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"CP system by default, tunable consistency via read/write concerns"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Defaults"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Writes: acknowledged by primary"}),"\n",(0,r.jsx)(n.li,{children:"Reads: primary"}),"\n",(0,r.jsx)(n.li,{children:"Replication is async"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Tunable knobs"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"writeConcern"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"readConcern"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.code,{children:"readPreference"})}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Stronger write durability\ndb.orders.insertOne(\n  { orderId: 1 },\n  { writeConcern: { w: 'majority', j: true, wtimeout: 5000 } }\n);\n\n// Snapshot read (transactions / causal consistency)\ndb.getMongo().startSession({\n  defaultTransactionOptions: { readConcern: { level: 'snapshot' } }\n});\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"editions-licensing-and-versioning",children:"Editions, Licensing, and Versioning"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Open-core distribution with SSPL, rapid release cadence"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Editions"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Community (free)"}),"\n",(0,r.jsx)(n.li,{children:"Enterprise (commercial)"}),"\n",(0,r.jsx)(n.li,{children:"Atlas (managed)"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Licensing"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"SSPL \u2265 4.0"}),"\n",(0,r.jsx)(n.li,{children:"Drivers: Apache 2.0"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Versioning"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Semantic-ish: MAJOR.MINOR"}),"\n",(0,r.jsx)(n.li,{children:"Rapid feature deprecation"}),"\n",(0,r.jsx)(n.li,{children:"FCV (Feature Compatibility Version)"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Check server version\ndb.version();\n\n// Check FCV\ndb.adminCommand({ getParameter: 1, featureCompatibilityVersion: 1 });\n\n// Set FCV (downgrade-safe)\ndb.adminCommand({\n  setFeatureCompatibilityVersion: '7.0' // string\n});\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["MongoDB optimizes for ",(0,r.jsx)(n.strong,{children:"developer velocity over strict normalization"})]}),"\n",(0,r.jsx)(n.li,{children:"Data modeling decisions are workload-driven"}),"\n",(0,r.jsx)(n.li,{children:"Consistency is explicit, not implicit"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"caveats",children:"Caveats"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Over-embedding causes document bloat"}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"$lookup"})," is not a free join"]}),"\n",(0,r.jsx)(n.li,{children:"Misconfigured concerns lead to silent data loss"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}},8453(e,n,s){s.d(n,{R:()=>l,x:()=>d});var i=s(6540);const r={},o=i.createContext(r);function l(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);