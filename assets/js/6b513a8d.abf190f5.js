"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[3361],{8453(e,n,t){t.d(n,{R:()=>r,x:()=>c});var s=t(6540);const i={},l=s.createContext(i);function r(e){const n=s.useContext(l);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:r(e.components),s.createElement(l.Provider,{value:n},e.children)}},9006(e,n,t){t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>c,default:()=>h,frontMatter:()=>r,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"Angular/elementref-dom-apis","title":"Using DOM APIs with inject(ElementRef)","description":"How to safely access and interact with the DOM using Angular\u2019s modern dependency injection API","source":"@site/docs/Angular/element-ref.md","sourceDirName":"Angular","slug":"/Angular/elementref-dom-apis","permalink":"/better-docs/docs/Angular/elementref-dom-apis","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/Angular/element-ref.md","tags":[],"version":"current","sidebarPosition":16,"frontMatter":{"id":"elementref-dom-apis","title":"Using DOM APIs with inject(ElementRef)","sidebar_position":16},"sidebar":"tutorialSidebar","previous":{"title":"Services","permalink":"/better-docs/docs/Angular/angular-services-cheatsheet"},"next":{"title":"Routing","permalink":"/better-docs/docs/Angular/routing"}}');var i=t(4848),l=t(8453);const r={id:"elementref-dom-apis",title:"Using DOM APIs with inject(ElementRef)",sidebar_position:16},c="Using DOM APIs with inject(ElementRef)",o={},d=[{value:"What is <code>ElementRef</code>",id:"what-is-elementref",level:2},{value:"Injecting <code>ElementRef</code>",id:"injecting-elementref",level:2},{value:"Accessing the Native Element",id:"accessing-the-native-element",level:2},{value:"Reading Layout Information",id:"reading-layout-information",level:2},{value:"Modifying DOM Properties",id:"modifying-dom-properties",level:2},{value:"When <code>ElementRef</code> Is Available",id:"when-elementref-is-available",level:2},{value:"Using <code>ElementRef</code> with View Queries",id:"using-elementref-with-view-queries",level:2},{value:"Risks and Best Practices",id:"risks-and-best-practices",level:2},{value:"Deprecated Pattern: Constructor Injection",id:"deprecated-pattern-constructor-injection",level:2},{value:"Mental Model to Remember",id:"mental-model-to-remember",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsxs)(n.h1,{id:"using-dom-apis-with-injectelementref",children:["Using DOM APIs with ",(0,i.jsx)(n.code,{children:"inject(ElementRef)"})]})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"How to safely access and interact with the DOM using Angular\u2019s modern dependency injection API"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"what-is-elementref",children:["What is ",(0,i.jsx)(n.code,{children:"ElementRef"})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ElementRef"})," is a wrapper around a native DOM element."]}),"\n",(0,i.jsx)(n.p,{children:"It provides direct access to the element rendered by Angular for a component or directive."}),"\n",(0,i.jsx)(n.p,{children:"Use it when you need to:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"read element dimensions"}),"\n",(0,i.jsx)(n.li,{children:"focus or scroll elements"}),"\n",(0,i.jsx)(n.li,{children:"integrate with third\u2011party DOM libraries"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"injecting-elementref",children:["Injecting ",(0,i.jsx)(n.code,{children:"ElementRef"})]}),"\n",(0,i.jsxs)(n.p,{children:["In Angular 19+, ",(0,i.jsx)(n.code,{children:"ElementRef"})," is accessed using the ",(0,i.jsx)(n.code,{children:"inject()"})," function instead of constructor injection."]}),"\n",(0,i.jsxs)(n.p,{children:["This gives access to the ",(0,i.jsx)(n.strong,{children:"host element"})," of the component or directive."]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-box',\n  standalone: true\n})\nexport class BoxComponent {\n  el = inject(ElementRef); // ElementRef<HTMLElement>\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"accessing-the-native-element",children:"Accessing the Native Element"}),"\n",(0,i.jsxs)(n.p,{children:["The actual DOM node is available via the ",(0,i.jsx)(n.code,{children:"nativeElement"})," property."]}),"\n",(0,i.jsx)(n.p,{children:"This is the element matched by the component\u2019s selector."}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-focus',\n  standalone: true\n})\nexport class FocusComponent {\n  el = inject(ElementRef);\n\n  focus() {\n    this.el.nativeElement.focus(); // HTMLElement\n  }\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"reading-layout-information",children:"Reading Layout Information"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ElementRef"})," can be used to read layout and geometry data from the DOM."]}),"\n",(0,i.jsx)(n.p,{children:"Common use cases include measuring size or position."}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-measure',\n  standalone: true\n})\nexport class MeasureComponent {\n  el = inject(ElementRef);\n\n  logSize() {\n    const rect = this.el.nativeElement.getBoundingClientRect();\n    console.log(rect.width, rect.height); // number\n  }\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"modifying-dom-properties",children:"Modifying DOM Properties"}),"\n",(0,i.jsx)(n.p,{children:"You can directly modify native properties on the element."}),"\n",(0,i.jsx)(n.p,{children:"This includes styles, attributes, and focus state."}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-highlight',\n  standalone: true\n})\nexport class HighlightComponent {\n  el = inject(ElementRef);\n\n  highlight() {\n    this.el.nativeElement.style.backgroundColor = 'yellow'; // string\n    this.el.nativeElement.setAttribute('tabindex', '0');    // string\n  }\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"when-elementref-is-available",children:["When ",(0,i.jsx)(n.code,{children:"ElementRef"})," Is Available"]}),"\n",(0,i.jsxs)(n.p,{children:["The host element exists ",(0,i.jsx)(n.strong,{children:"as soon as the component is created"}),"."]}),"\n",(0,i.jsxs)(n.p,{children:["This means ",(0,i.jsx)(n.code,{children:"inject(ElementRef)"})," is safe to use:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"in class fields"}),"\n",(0,i.jsx)(n.li,{children:"in the constructor"}),"\n",(0,i.jsx)(n.li,{children:"in lifecycle hooks"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["DOM ",(0,i.jsx)(n.strong,{children:"children"})," are only guaranteed after view initialization."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"using-elementref-with-view-queries",children:["Using ",(0,i.jsx)(n.code,{children:"ElementRef"})," with View Queries"]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"ElementRef"})," is often combined with ",(0,i.jsx)(n.code,{children:"viewChild()"})," to access ",(0,i.jsx)(n.strong,{children:"child elements"}),", not just the host."]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-input',\n  standalone: true,\n  template: `<input #ctrl />`\n})\nexport class InputComponent {\n  input = viewChild<ElementRef>('ctrl'); // Signal<ElementRef | undefined>\n\n  focus() {\n    this.input()?.nativeElement.focus();\n  }\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"risks-and-best-practices",children:"Risks and Best Practices"}),"\n",(0,i.jsx)(n.p,{children:"Direct DOM access:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"bypasses Angular\u2019s rendering abstraction"}),"\n",(0,i.jsx)(n.li,{children:"may break server-side rendering"}),"\n",(0,i.jsx)(n.li,{children:"may not work with Web Workers"}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Use ",(0,i.jsx)(n.code,{children:"ElementRef"}),":"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"sparingly"}),"\n",(0,i.jsx)(n.li,{children:"only for read or small, isolated writes"}),"\n",(0,i.jsx)(n.li,{children:"prefer Angular bindings when possible"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"deprecated-pattern-constructor-injection",children:"Deprecated Pattern: Constructor Injection"}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"\u26a0\ufe0f Legacy style. Avoid in Angular 19+."}),"\n"]}),"\n",(0,i.jsxs)(n.p,{children:["Before ",(0,i.jsx)(n.code,{children:"inject()"}),", ",(0,i.jsx)(n.code,{children:"ElementRef"})," was commonly injected via the constructor."]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"@Component({ selector: 'app-legacy' })\nexport class LegacyComponent {\n  constructor(private el: ElementRef) {}\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"mental-model-to-remember",children:"Mental Model to Remember"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ElementRef"})," \u2192 direct access to ",(0,i.jsx)(n.strong,{children:"one DOM element"})]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"inject(ElementRef)"})," \u2192 host element"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"viewChild(ElementRef)"})," \u2192 child element"]}),"\n",(0,i.jsx)(n.li,{children:"Prefer bindings \u2192 fallback to DOM APIs"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(a,{...e})}):a(e)}}}]);