"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[2528],{3084(e,n,r){r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>u,frontMatter:()=>t,metadata:()=>s,toc:()=>l});const s=JSON.parse('{"id":"Typescript/async-promise-errors","title":"Async, Promises & Errors","description":"----------------","source":"@site/docs/Typescript/Async, Promises & Errors.md","sourceDirName":"Typescript","slug":"/Typescript/async-promise-errors","permalink":"/better-docs/docs/Typescript/async-promise-errors","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Typescript/Async, Promises & Errors.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"id":"async-promise-errors","title":"Async, Promises & Errors","sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"Modules & Namespaces","permalink":"/better-docs/docs/Typescript/modules-namespaces"},"next":{"title":"Declaration Files & Interop","permalink":"/better-docs/docs/Typescript/declaration-interop"}}');var o=r(4848),i=r(8453);const t={id:"async-promise-errors",title:"Async, Promises & Errors",sidebar_position:12},c=void 0,a={},l=[{value:"Promise Typing",id:"promise-typing",level:2},{value:"async / await",id:"async--await",level:2},{value:"Error Handling &amp; unknown",id:"error-handling--unknown",level:2},{value:"try / catch Narrowing",id:"try--catch-narrowing",level:2},{value:"Notes",id:"notes",level:2}];function d(e){const n={code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(n.h2,{id:"promise-typing",children:"Promise Typing"}),"\n",(0,o.jsx)(n.p,{children:"Defines the resolved value type of an asynchronous operation."}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Examples"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// basic promise\nconst p1: Promise<number> = Promise.resolve(1);\n\n// promise with object\nconst p2: Promise<{ id: number; name: string }> = Promise.resolve({\n  id: 1,\n  name: 'Dev'\n});\n\n// function returning a promise\nfunction fetchUser(): Promise<string> {\n  return Promise.resolve('user');\n}\n"})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"async--await",children:"async / await"}),"\n",(0,o.jsx)(n.p,{children:"Provides synchronous-looking syntax for working with promises."}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Examples"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"// async function always returns Promise<T>\nasync function getCount(): Promise<number> {\n  return 10; // number \u2192 Promise<number>\n}\n\n// awaiting a promise\nasync function run() {\n  const value = await getCount(); // number\n}\n\n// async arrow function\nconst load = async (): Promise<void> => {\n  await Promise.resolve();\n};\n"})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"error-handling--unknown",children:"Error Handling & unknown"}),"\n",(0,o.jsxs)(n.p,{children:["Errors caught in ",(0,o.jsx)(n.code,{children:"catch"})," blocks are typed as ",(0,o.jsx)(n.code,{children:"unknown"}),"."]}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Examples"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"try {\n  throw new Error('fail');\n} catch (err) {\n  // err is unknown\n  if (err instanceof Error) {\n    console.log(err.message); // string\n  }\n}\n\n// promise rejection\nPromise.reject('error').catch((err: unknown) => {\n  if (typeof err === 'string') {\n    console.log(err);\n  }\n});\n"})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"try--catch-narrowing",children:"try / catch Narrowing"}),"\n",(0,o.jsx)(n.p,{children:"Narrows error types using runtime checks."}),"\n",(0,o.jsxs)(r,{children:[(0,o.jsx)("summary",{children:"Examples"}),(0,o.jsx)(n.pre,{children:(0,o.jsx)(n.code,{className:"language-ts",children:"function parse(input: string) {\n  try {\n    return JSON.parse(input) as object; // assertion\n  } catch (err) {\n    if (err instanceof SyntaxError) {\n      return null;\n    }\n\n    if (typeof err === 'string') {\n      return err;\n    }\n\n    throw err; // rethrow unknown\n  }\n}\n"})})]}),"\n",(0,o.jsx)(n.hr,{}),"\n",(0,o.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,o.jsxs)(n.ul,{children:["\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"async"})," functions always return ",(0,o.jsx)(n.code,{children:"Promise<T>"})]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"await"})," unwraps the resolved value type"]}),"\n",(0,o.jsxs)(n.li,{children:[(0,o.jsx)(n.code,{children:"catch"})," variables are ",(0,o.jsx)(n.code,{children:"unknown"})," by default"]}),"\n",(0,o.jsx)(n.li,{children:"Narrow errors before accessing properties"}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,o.jsx)(n,{...e,children:(0,o.jsx)(d,{...e})}):d(e)}},8453(e,n,r){r.d(n,{R:()=>t,x:()=>c});var s=r(6540);const o={},i=s.createContext(o);function t(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:t(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);