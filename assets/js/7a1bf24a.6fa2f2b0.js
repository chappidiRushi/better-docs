"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[3019],{1190(e,t,n){n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"React/under-the-hood","title":"Under The Hood","description":"----------------","source":"@site/docs/React/Under The Hood.md","sourceDirName":"React","slug":"/React/under-the-hood","permalink":"/better-docs/docs/React/under-the-hood","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/React/Under The Hood.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"id":"under-the-hood","title":"Under The Hood","sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Component","permalink":"/better-docs/docs/React/component"},"next":{"title":"Hooks","permalink":"/better-docs/docs/React/hooks"}}');var r=n(4848),s=n(8453);const o={id:"under-the-hood",title:"Under The Hood",sidebar_position:4},a=void 0,l={},c=[{value:"React Rendering Flow Diagram (Markdown Table)",id:"react-rendering-flow-diagram-markdown-table",level:2},{value:"Step 1: JSX Compilation",id:"step-1-jsx-compilation",level:2},{value:"Step 2: Virtual DOM Creation",id:"step-2-virtual-dom-creation",level:2},{value:"Step 3: Initial Rendering",id:"step-3-initial-rendering",level:2},{value:"Step 4: State/Props Changes",id:"step-4-stateprops-changes",level:2},{value:"Step 5: Reconciliation (Diffing)",id:"step-5-reconciliation-diffing",level:2},{value:"Step 6: Fiber Architecture &amp; Prioritization",id:"step-6-fiber-architecture--prioritization",level:2},{value:"Step 7: Commit Phase",id:"step-7-commit-phase",level:2},{value:"Step 8: Effects &amp; Lifecycle Hooks",id:"step-8-effects--lifecycle-hooks",level:2},{value:"Step 9: Event Delegation",id:"step-9-event-delegation",level:2},{value:"Notes &amp; Caveats",id:"notes--caveats",level:2}];function d(e){const t={code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:n}=t;return n||function(e,t){throw new Error("Expected "+(t?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.h2,{id:"react-rendering-flow-diagram-markdown-table",children:"React Rendering Flow Diagram (Markdown Table)"}),"\n",(0,r.jsxs)(t.table,{children:[(0,r.jsx)(t.thead,{children:(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.th,{children:"Step"}),(0,r.jsx)(t.th,{children:"Description"})]})}),(0,r.jsxs)(t.tbody,{children:[(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"JSX Compilation"}),(0,r.jsxs)(t.td,{children:["JSX is compiled into ",(0,r.jsx)(t.code,{children:"React.createElement"})," calls creating Virtual DOM nodes"]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Virtual DOM Creation"}),(0,r.jsx)(t.td,{children:"React builds an in-memory representation of the UI"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Initial Rendering"}),(0,r.jsxs)(t.td,{children:["React mounts Virtual DOM to real DOM using ",(0,r.jsx)(t.code,{children:"createRoot().render"})]})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"State/Props Changes"}),(0,r.jsx)(t.td,{children:"Any state or props change marks a component for re-rendering"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Reconciliation (Diffing)"}),(0,r.jsx)(t.td,{children:"React compares new Virtual DOM with previous to compute minimal updates"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Fiber Architecture & Prioritization"}),(0,r.jsx)(t.td,{children:"Updates are split into units with high-priority work processed first"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Commit Phase"}),(0,r.jsx)(t.td,{children:"Changes are applied to the real DOM only where needed"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Effects & Lifecycle Hooks"}),(0,r.jsx)(t.td,{children:"useEffect and other hooks run after DOM updates"})]}),(0,r.jsxs)(t.tr,{children:[(0,r.jsx)(t.td,{children:"Event Delegation"}),(0,r.jsx)(t.td,{children:"Single root listener handles events efficiently"})]})]})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-1-jsx-compilation",children:"Step 1: JSX Compilation"}),"\n",(0,r.jsxs)(t.p,{children:["React JSX is compiled into ",(0,r.jsx)(t.code,{children:"React.createElement"})," calls, creating a Virtual DOM representation."]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const element = <h1>Hello</h1>;\n// Compiled to:\nconst elementCompiled = React.createElement('h1', null, 'Hello');\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-2-virtual-dom-creation",children:"Step 2: Virtual DOM Creation"}),"\n",(0,r.jsx)(t.p,{children:"React maintains an in-memory tree of UI elements, the Virtual DOM, representing the UI state at any point."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const vDom = React.createElement('div', null, 'Hello');\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-3-initial-rendering",children:"Step 3: Initial Rendering"}),"\n",(0,r.jsxs)(t.p,{children:["React mounts the Virtual DOM to the real DOM for the first time using ",(0,r.jsx)(t.code,{children:"ReactDOM.render"})," or ",(0,r.jsx)(t.code,{children:"createRoot().render"}),"."]}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const root = ReactDOM.createRoot(document.getElementById('root'));\nroot.render(<App />);\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-4-stateprops-changes",children:"Step 4: State/Props Changes"}),"\n",(0,r.jsx)(t.p,{children:"When a component's state or props change, React marks the component as needing an update and triggers re-rendering."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const [count, setCount] = useState(0);\nsetCount(count + 1); // triggers re-render\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-5-reconciliation-diffing",children:"Step 5: Reconciliation (Diffing)"}),"\n",(0,r.jsx)(t.p,{children:"React compares the new Virtual DOM with the previous one to compute the minimal set of changes required for the real DOM."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"const oldVDom = <div>1</div>;\nconst newVDom = <div>2</div>;\n// React updates only the text node\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-6-fiber-architecture--prioritization",children:"Step 6: Fiber Architecture & Prioritization"}),"\n",(0,r.jsx)(t.p,{children:"React Fiber breaks updates into units of work, allowing high-priority updates (like user input) to interrupt low-priority tasks for smooth rendering."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// High priority: typing input\n// Low priority: animation frame updates\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-7-commit-phase",children:"Step 7: Commit Phase"}),"\n",(0,r.jsx)(t.p,{children:"After diffing, React applies changes to the real DOM in the commit phase, updating only the affected nodes."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"// React updates text nodes, attributes, or adds/removes elements as needed\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-8-effects--lifecycle-hooks",children:"Step 8: Effects & Lifecycle Hooks"}),"\n",(0,r.jsx)(t.p,{children:"React runs useEffect, useLayoutEffect, and other lifecycle-related hooks after DOM updates to handle side effects."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"useEffect(() => {\n  console.log('DOM updated');\n}, [count]);\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"step-9-event-delegation",children:"Step 9: Event Delegation"}),"\n",(0,r.jsx)(t.p,{children:"React attaches a single listener to the root and delegates events to components efficiently."}),"\n",(0,r.jsxs)(n,{children:[(0,r.jsx)("summary",{children:"Example"}),(0,r.jsx)(t.pre,{children:(0,r.jsx)(t.code,{className:"language-js",children:"<button onClick={() => console.log('clicked')}>Click</button>\n// Handled through React's event delegation system\n"})})]}),"\n",(0,r.jsx)(t.hr,{}),"\n",(0,r.jsx)(t.h2,{id:"notes--caveats",children:"Notes & Caveats"}),"\n",(0,r.jsxs)(t.ul,{children:["\n",(0,r.jsx)(t.li,{children:"Virtual DOM minimizes direct DOM manipulation."}),"\n",(0,r.jsx)(t.li,{children:"Fiber enables incremental rendering and task prioritization."}),"\n",(0,r.jsx)(t.li,{children:"State and hooks are tracked internally per fiber."}),"\n",(0,r.jsx)(t.li,{children:"Event delegation reduces memory usage and improves performance."}),"\n"]})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,t,n){n.d(t,{R:()=>o,x:()=>a});var i=n(6540);const r={},s=i.createContext(r);function o(e){const t=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);