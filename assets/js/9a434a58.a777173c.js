"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[9448],{3024(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>p,frontMatter:()=>o,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"Angular/http-client","title":"HttpClient","description":"Overview","source":"@site/docs/Angular/http-client.md","sourceDirName":"Angular","slug":"/Angular/http-client","permalink":"/better-docs/docs/Angular/http-client","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Angular/http-client.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Host Elements CheatSheet","permalink":"/better-docs/docs/Angular/host-element"},"next":{"title":"Internationalization (i18n)","permalink":"/better-docs/docs/Angular/internationalization"}}');var s=t(4848),i=t(8453);const o={},l="HttpClient",c={},a=[{value:"Overview",id:"overview",level:2},{value:"App\u2011Level Setup (Standalone)",id:"applevel-setup-standalone",level:2},{value:"Making Requests (Typed)",id:"making-requests-typed",level:2},{value:"Common Options",id:"common-options",level:3},{value:"Responses &amp; Errors",id:"responses--errors",level:2},{value:"Functional Interceptors (Recommended)",id:"functional-interceptors-recommended",level:2},{value:"Upload Progress &amp; Events",id:"upload-progress--events",level:2},{value:"Files &amp; Binary Data",id:"files--binary-data",level:2},{value:"Cancellation",id:"cancellation",level:2},{value:"HttpContext &amp; Tokens (Per\u2011Request Flags)",id:"httpcontext--tokens-perrequest-flags",level:2},{value:"Organizing APIs (Services)",id:"organizing-apis-services",level:2},{value:"Retry &amp; Backoff (RxJS)",id:"retry--backoff-rxjs",level:2},{value:"Authentication",id:"authentication",level:2},{value:"Testing (HttpClientTesting)",id:"testing-httpclienttesting",level:2},{value:"Fetch Backend (Optional)",id:"fetch-backend-optional",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"httpclient",children:"HttpClient"})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"HttpClient"})," is Angular\u2019s typed, Observable\u2011based API for HTTP/REST."]}),"\n",(0,s.jsxs)(n.li,{children:["Tree\u2011shakable setup via ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"provideHttpClient()"})}),"; opt\u2011in features like ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"withFetch()"})})," and ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"withInterceptors()"})}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Works seamlessly with standalone components, functional services, and DI via ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"inject()"})}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"applevel-setup-standalone",children:"App\u2011Level Setup (Standalone)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"// app.config.ts\nimport { ApplicationConfig, inject } from '@angular/core';\nimport {\n  provideHttpClient,\n  withInterceptors,\n  withFetch,\n} from '@angular/common/http';\n\nimport { authInterceptor } from './auth.interceptor';\n\nexport const appConfig: ApplicationConfig = {\nproviders: [\nprovideHttpClient(\nwithFetch(),              // optional: native Fetch backend\nwithInterceptors([authInterceptor])\n)\n]\n};\n\n"})})]}),"\n",(0,s.jsx)(n.p,{children:"Inject anywhere:"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HttpClient } from '@angular/common/http';\nimport { inject } from '@angular/core';\n\nconst http = inject(HttpClient);\n"})})]}),"\n",(0,s.jsxs)(n.blockquote,{children:["\n",(0,s.jsxs)(n.p,{children:["\u2714\ufe0f Prefer ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"inject()"})})," over constructor injection in functional code."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"making-requests-typed",children:"Making Requests (Typed)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"http.get<T>(url, options?)\nhttp.post<T>(url, body?, options?)\nhttp.put<T>(url, body?, options?)\nhttp.patch<T>(url, body?, options?)\nhttp.delete<T>(url, options?)\nhttp.request<T>(method, url, options?)\n"})})]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"interface Todo { id: number; title: string; completed: boolean; }\nhttp.get<Todo[]>('/api/todos').subscribe();\n"})})]}),"\n",(0,s.jsx)(n.h3,{id:"common-options",children:"Common Options"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"headers?: HttpHeaders | {...}"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"params?: HttpParams | {...}"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"observe?: 'body' | 'response' | 'events'"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"responseType?: 'json' | 'text' | 'blob' | 'arraybuffer'"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"withCredentials?: boolean"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"context?: HttpContext"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Query Params (object literal OK):"})}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"http.get('/api/items', { params: { page: 1, q: 'search' } });\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"responses--errors",children:"Responses & Errors"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Success emits ",(0,s.jsx)(n.strong,{children:"once"})," then completes."]}),"\n",(0,s.jsxs)(n.li,{children:["Errors emit ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"HttpErrorResponse"})})," (",(0,s.jsx)(n.code,{children:"status"}),", ",(0,s.jsx)(n.code,{children:"message"}),", ",(0,s.jsx)(n.code,{children:"error"}),", etc.)."]}),"\n"]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HttpErrorResponse } from '@angular/common/http';\nimport { catchError, throwError } from 'rxjs';\n\nhttp.get('/api/data').pipe(\ncatchError((err: HttpErrorResponse) => {\nconsole.error(err.status, err.error);\nreturn throwError(() => err);\n})\n).subscribe();\n\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"functional-interceptors-recommended",children:"Functional Interceptors (Recommended)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HttpInterceptorFn } from '@angular/common/http';\n\nexport const authInterceptor: HttpInterceptorFn = (req, next) => {\n  const cloned = req.clone({\n    setHeaders: { Authorization: 'Bearer token' }\n  });\n  return next(cloned);\n};\n"})})]}),"\n",(0,s.jsx)(n.p,{children:"Register with:"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"provideHttpClient(withInterceptors([authInterceptor]));\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"upload-progress--events",children:"Upload Progress & Events"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HttpEventType } from '@angular/common/http';\n\nhttp.post('/upload', formData, {\nreportProgress: true,\nobserve: 'events'\n}).subscribe(event => {\nif (event.type === HttpEventType.UploadProgress) {\nconst pct = Math.round(100 * (event.loaded ?? 0) / (event.total ?? 1));\n}\n});\n\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"files--binary-data",children:"Files & Binary Data"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"http.get('/file.pdf', { responseType: 'blob' })\n  .subscribe(blob => { /* save or preview */ });\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"cancellation",children:"Cancellation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Unsubscribe"})," from the returned Observable, or"]}),"\n",(0,s.jsxs)(n.li,{children:["Use RxJS like ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"takeUntil()"})})," / ",(0,s.jsx)(n.strong,{children:(0,s.jsx)(n.code,{children:"takeUntilDestroyed()"})})," (Angular)."]}),"\n"]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"const destroy$ = new Subject<void>();\nhttp.get('/api').pipe(takeUntil(destroy$)).subscribe();\ndestroy$.next();\ndestroy$.complete();\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"httpcontext--tokens-perrequest-flags",children:"HttpContext & Tokens (Per\u2011Request Flags)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { HttpContext, HttpContextToken } from '@angular/common/http';\n\nexport const SKIP_AUTH = new HttpContextToken(() => false);\n\nhttp.get('/public', {\ncontext: new HttpContext().set(SKIP_AUTH, true)\n});\n\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"organizing-apis-services",children:"Organizing APIs (Services)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { Injectable, inject } from '@angular/core';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable({ providedIn: 'root' })\nexport class UsersApi {\n  private http = inject(HttpClient);\n  private base = '/api/users';\n\n  list() { return this.http.get<User[]>(this.base); }\n  create(dto: Partial<User>) { return this.http.post<User>(this.base, dto); }\n}\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"retry--backoff-rxjs",children:"Retry & Backoff (RxJS)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import { retry } from 'rxjs';\n\nhttp.get('/api').pipe(retry(2)).subscribe();\n\n"})})]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsxs)(n.em,{children:["(Use ",(0,s.jsx)(n.code,{children:"retryWhen"})," + ",(0,s.jsx)(n.code,{children:"delay"})," + ",(0,s.jsx)(n.code,{children:"scan"})," for custom backoff.)"]})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"authentication",children:"Authentication"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Attach tokens in an ",(0,s.jsx)(n.strong,{children:"interceptor"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Cookie auth \u2192 ",(0,s.jsx)(n.code,{children:"{ withCredentials: true }"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"testing-httpclienttesting",children:"Testing (HttpClientTesting)"}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"Example"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-ts",children:"import {\n  HttpTestingController,\n  provideHttpClientTesting\n} from '@angular/common/http/testing';\nimport { TestBed } from '@angular/core/testing';\nimport { provideHttpClient } from '@angular/common/http';\n\nbeforeEach(() => {\n  TestBed.configureTestingModule({\n    providers: [\n      provideHttpClient(),\n      provideHttpClientTesting()\n    ]\n  });\n});\n\nit('mocks a request', () => {\n  const http = TestBed.inject(HttpClient);\n  const httpMock = TestBed.inject(HttpTestingController);\n\n  http.get('/api/item').subscribe();\n\n  httpMock.expectOne('/api/item').flush({ id: 1 });\n  httpMock.verify();\n});\n"})})]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"fetch-backend-optional",children:"Fetch Backend (Optional)"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.code,{children:"withFetch()"})," switches to the native Fetch API (smaller; some differences like no download progress events)."]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{})]})}function p(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var r=t(6540);const s={},i=r.createContext(s);function o(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);