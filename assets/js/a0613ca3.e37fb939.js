"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[1549],{8294(e,n,s){s.r(n),s.d(n,{assets:()=>i,contentTitle:()=>l,default:()=>x,frontMatter:()=>a,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"angular/ngrx","title":"NgRx (State Management)","description":"NgRx is a reactive state management library for Angular apps based on Redux principles \u2014 a single source of truth, immutable state, unidirectional data flow, and RxJS streams.","source":"@site/docs/angular/ngrx.md","sourceDirName":"angular","slug":"/angular/ngrx","permalink":"/better-docs/docs/angular/ngrx","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/angular/ngrx.md","tags":[],"version":"current","sidebarPosition":23,"frontMatter":{"id":"ngrx","title":"NgRx (State Management)","sidebar_position":23},"sidebar":"tutorialSidebar","previous":{"title":"Signal Forms","permalink":"/better-docs/docs/angular/signal-forms"},"next":{"title":"Template-Driven Forms","permalink":"/better-docs/docs/angular/template-driven-forms"}}');var t=s(4848),o=s(8453);const a={id:"ngrx",title:"NgRx (State Management)",sidebar_position:23},l="NgRx (State Management)",i={},c=[{value:"\ud83e\udde0 Core Concepts",id:"-core-concepts",level:2},{value:"\ud83d\ude80 Setup (Angular 21 + NgRx latest)",id:"-setup-angular-21--ngrx-latest",level:2},{value:"\ud83e\udde9 Defining Feature State",id:"-defining-feature-state",level:2},{value:"\ud83c\udfaf Actions (What Happened)",id:"-actions-what-happened",level:2},{value:"\ud83e\uddee Reducers (How State Changes)",id:"-reducers-how-state-changes",level:2},{value:"\ud83d\udd0d Selectors (Read Data Reactively)",id:"-selectors-read-data-reactively",level:2},{value:"\u26a1 Effects (Handle Async &amp; Side\u2011Effects)",id:"-effects-handle-async--sideeffects",level:2},{value:"\ud83d\udce6 NgRx Entity (for Lists &amp; CRUD)",id:"-ngrx-entity-for-lists--crud",level:2},{value:"\ud83e\udded Router Store",id:"-router-store",level:2},{value:"\ud83e\uddf0 Store DevTools",id:"-store-devtools",level:2},{value:"\ud83e\uddd1\u200d\ud83d\udd2c ComponentStore (Local &amp; Feature Stores)",id:"-componentstore-local--feature-stores",level:2},{value:"\ud83d\udd17 NgRx + Angular Signals (Bridge)",id:"-ngrx--angular-signals-bridge",level:2},{value:"\ud83e\uddea Testing NgRx",id:"-testing-ngrx",level:2},{value:"\ud83d\udccf Best Practices",id:"-best-practices",level:2},{value:"\ud83e\udde0 When to Use What",id:"-when-to-use-what",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",em:"em",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"ngrx-state-management",children:"NgRx (State Management)"})}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"NgRx"})," is a reactive state management library for Angular apps based on Redux principles \u2014 a ",(0,t.jsx)(n.strong,{children:"single source of truth, immutable state, unidirectional data flow, and RxJS streams"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["This guide assumes a ",(0,t.jsx)(n.strong,{children:"mid\u2011level Angular dev"})," and explains ",(0,t.jsx)(n.strong,{children:"what each piece does \u2014 concisely \u2014 with foldable examples"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-core-concepts",children:"\ud83e\udde0 Core Concepts"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Store"})," \u2014 global reactive state container"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Actions"})," \u2014 plain objects that describe ",(0,t.jsx)(n.em,{children:"what happened"})]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Reducers"})," \u2014 pure functions that ",(0,t.jsx)(n.em,{children:"update state"})," based on actions"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Selectors"})," \u2014 queries that read state reactively"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Effects"})," \u2014 side\u2011effects handler (e.g., HTTP)"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Entity"})," \u2014 helpers for normalized collections"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ComponentStore"})," \u2014 local feature\u2011level store"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Router Store"})," \u2014 sync router state with Store"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-setup-angular-21--ngrx-latest",children:"\ud83d\ude80 Setup (Angular 21 + NgRx latest)"}),"\n",(0,t.jsx)(n.p,{children:"Install packages:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"ng add @ngrx/store@latest\nng add @ngrx/effects@latest\nng add @ngrx/store-devtools@latest\nng add @ngrx/entity@latest\nng add @ngrx/router-store@latest\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Register store in ",(0,t.jsx)(n.code,{children:"main.ts"})," or bootstrap file:"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { bootstrapApplication } from '@angular/platform-browser';\nimport { AppComponent } from './app/app.component';\nimport { provideStore } from '@ngrx/store';\nimport { provideEffects } from '@ngrx/effects';\nimport { provideStoreDevtools } from '@ngrx/store-devtools';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideStore(),              // root store (empty for now)\n    provideEffects(),            // root effects\n    provideStoreDevtools()       // Redux DevTools\n  ]\n});\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-defining-feature-state",children:"\ud83e\udde9 Defining Feature State"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"feature"})," isolates a slice of global state."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"// counter.reducer.ts\nimport { createReducer, on } from '@ngrx/store';\nimport { createAction, props } from '@ngrx/store';\n\n// Actions \u2014 describe events\nexport const increment = createAction('[Counter] Increment');\nexport const decrement = createAction('[Counter] Decrement');\nexport const set = createAction('[Counter] Set', props<{ value: number }>());\n\n// State model\nexport interface CounterState {\n  value: number;\n}\n\nconst initialState: CounterState = { value: 0 };\n\n// Reducer \u2014 pure state update logic\nexport const counterReducer = createReducer(\n  initialState,\n  on(increment, state => ({ value: state.value + 1 })),\n  on(decrement, state => ({ value: state.value - 1 })),\n  on(set, (state, { value }) => ({ value }))\n);\n"})})]}),"\n",(0,t.jsx)(n.p,{children:"Register the feature:"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { provideState } from '@ngrx/store';\nimport { counterReducer } from './counter.reducer';\n\nproviders: [\n  provideState('counter', counterReducer)\n]\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-actions-what-happened",children:"\ud83c\udfaf Actions (What Happened)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Actions are plain objects"})," with a ",(0,t.jsx)(n.code,{children:"type"})," and optional payload."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export const loadUsers = createAction('[Users] Load Users');\nexport const loadUsersSuccess = createAction(\n  '[Users] Load Users Success',\n  props<{ users: User[] }>()\n);\nexport const loadUsersFailure = createAction(\n  '[Users] Load Users Failure',\n  props<{ error: unknown }>()\n);\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-reducers-how-state-changes",children:"\ud83e\uddee Reducers (How State Changes)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pure functions"})," \u2192 no side effects, no async."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"export const usersReducer = createReducer(\n  { users: [], loading: false },\n  on(loadUsers, s => ({ ...s, loading: true })),\n  on(loadUsersSuccess, (s, { users }) => ({ ...s, users, loading: false })),\n  on(loadUsersFailure, s => ({ ...s, loading: false }))\n);\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-selectors-read-data-reactively",children:"\ud83d\udd0d Selectors (Read Data Reactively)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Query state in a ",(0,t.jsx)(n.strong,{children:"memoized"}),", performant way."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { createSelector, createFeatureSelector } from '@ngrx/store';\n\nconst selectUsersFeature = createFeatureSelector<any>('users');\n\nexport const selectUsers = createSelector(\n  selectUsersFeature,\n  s => s.users\n);\n\nexport const selectUsersLoading = createSelector(\n  selectUsersFeature,\n  s => s.loading\n);\n"})})]}),"\n",(0,t.jsx)(n.p,{children:"Use in a component:"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { Component, inject } from '@angular/core';\nimport { Store } from '@ngrx/store';\nimport { selectUsers, selectUsersLoading, loadUsers } from './state';\n\n@Component({ standalone: true, template: `` })\nexport class UsersComponent {\n  private store = inject(Store);\n\n  users$ = this.store.select(selectUsers);\n  loading$ = this.store.select(selectUsersLoading);\n\n  ngOnInit() {\n    this.store.dispatch(loadUsers());\n  }\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-effects-handle-async--sideeffects",children:"\u26a1 Effects (Handle Async & Side\u2011Effects)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Effects listen to actions \u2192 trigger async work \u2192 dispatch new actions."})}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { inject, Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { switchMap, map, catchError, of } from 'rxjs';\nimport { HttpClient } from '@angular/common/http';\n\n@Injectable()\nexport class UsersEffects {\n  private actions$ = inject(Actions);\n  private http = inject(HttpClient);\n\n  loadUsers$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(loadUsers),\n      switchMap(() =>\n        this.http.get<User[]>(`/api/users`).pipe(\n          map(users => loadUsersSuccess({ users })),\n          catchError(error => of(loadUsersFailure({ error })))\n        )\n      )\n    )\n  );\n}\n"})})]}),"\n",(0,t.jsx)(n.p,{children:"Provide effects:"}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { provideEffects } from '@ngrx/effects';\n\nproviders: [\n  provideEffects(UsersEffects)\n];\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-ngrx-entity-for-lists--crud",children:"\ud83d\udce6 NgRx Entity (for Lists & CRUD)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Provides ",(0,t.jsx)(n.strong,{children:"adapters"})," to manage collections efficiently (IDs, sorting, updates)."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { createEntityAdapter, EntityState } from '@ngrx/entity';\n\ninterface User { id: string; name: string; }\n\nexport interface UsersState extends EntityState<User> {\n  loading: boolean;\n}\n\nconst adapter = createEntityAdapter<User>();\n\nconst initialState = adapter.getInitialState({ loading: false });\n\nexport const usersReducer = createReducer(\n  initialState,\n  on(loadUsersSuccess, (s, { users }) =>\n    adapter.setAll(users, { ...s, loading: false })\n  )\n);\n\nexport const {\n  selectAll: selectAllUsers,\n  selectEntities: selectUserEntities\n} = adapter.getSelectors();\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-router-store",children:"\ud83e\udded Router Store"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Sync Angular Router state into the Store for reactive routing."}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { provideRouterStore } from '@ngrx/router-store';\n\nproviders: [\n  provideRouterStore()\n];\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-store-devtools",children:"\ud83e\uddf0 Store DevTools"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Inspect state & actions in ",(0,t.jsx)(n.strong,{children:"Redux DevTools"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { provideStoreDevtools } from '@ngrx/store-devtools';\n\nproviders: [\n  provideStoreDevtools({ maxAge: 25, logOnly: false })\n];\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-componentstore-local--feature-stores",children:"\ud83e\uddd1\u200d\ud83d\udd2c ComponentStore (Local & Feature Stores)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"A lightweight, component\u2011scoped reactive store."}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { ComponentStore } from '@ngrx/component-store';\nimport { Injectable } from '@angular/core';\n\ninterface TodoState { todos: string[]; }\n\n@Injectable()\nexport class TodoStore extends ComponentStore<TodoState> {\n  constructor() { super({ todos: [] }); }\n\n  readonly todos$ = this.select(s => s.todos);\n\n  readonly add = this.updater((s, todo: string) => ({\n    todos: [...s.todos, todo]\n  }));\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-ngrx--angular-signals-bridge",children:"\ud83d\udd17 NgRx + Angular Signals (Bridge)"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["Select store values ",(0,t.jsx)(n.em,{children:"as signals"})," for template\u2011first reactivity."]}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"import { toSignal } from '@angular/core/rxjs-interop';\n\nusers = toSignal(this.store.select(selectUsers));\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-testing-ngrx",children:"\ud83e\uddea Testing NgRx"}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Test reducers as pure functions & test effects with marble testing."}),"\n"]}),"\n",(0,t.jsxs)(s,{children:[(0,t.jsx)("summary",{children:"Example"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-ts",children:"it('should increment', () => {\n  const state = counterReducer({ value: 0 }, increment());\n  expect(state.value).toBe(1);\n});\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-best-practices",children:"\ud83d\udccf Best Practices"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Keep ",(0,t.jsx)(n.strong,{children:"reducers pure"})," \u2014 no async / side effects"]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"selectors everywhere"})," \u2014 not ",(0,t.jsx)(n.code,{children:"store.source"})," internals"]}),"\n",(0,t.jsxs)(n.li,{children:["Prefer ",(0,t.jsx)(n.strong,{children:"Entity"})," for lists"]}),"\n",(0,t.jsxs)(n.li,{children:["Load data using ",(0,t.jsx)(n.strong,{children:"Effects"}),", ",(0,t.jsx)(n.em,{children:"not components"})]}),"\n",(0,t.jsxs)(n.li,{children:["Use ",(0,t.jsx)(n.strong,{children:"ComponentStore"})," for isolated feature logic"]}),"\n",(0,t.jsxs)(n.li,{children:["Lazy\u2011load feature state with ",(0,t.jsx)(n.code,{children:"provideState"})]}),"\n",(0,t.jsx)(n.li,{children:"Avoid giant global stores \u2014 organize by feature"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"-when-to-use-what",children:"\ud83e\udde0 When to Use What"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Store + Effects"})," \u2192 global cross\u2011app state, server sync, caching"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"ComponentStore"})," \u2192 page/feature\u2011local reactive state"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Entity"})," \u2192 large lists & CRUD"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"RouterStore"})," \u2192 route\u2011driven logic"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Signals + Store"})," \u2192 simpler read layer"]}),"\n"]}),"\n",(0,t.jsx)(n.hr,{})]})}function x(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>l});var r=s(6540);const t={},o=r.createContext(t);function a(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:a(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);