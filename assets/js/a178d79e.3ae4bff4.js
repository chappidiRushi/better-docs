"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[6733],{3741(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>s,default:()=>a,frontMatter:()=>o,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"Angular/component-queries","title":"Referencing Component Children with Queries","description":"How a component references elements, directives, and child components using the modern query APIs","source":"@site/docs/Angular/referencing-queries.md","sourceDirName":"Angular","slug":"/Angular/component-queries","permalink":"/better-docs/docs/Angular/component-queries","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/Angular/referencing-queries.md","tags":[],"version":"current","sidebarPosition":12,"frontMatter":{"id":"component-queries","title":"Referencing Component Children with Queries","sidebar_position":12},"sidebar":"tutorialSidebar","previous":{"title":"Component Inheritance","permalink":"/better-docs/docs/Angular/component-inheritance"},"next":{"title":"Host Elements CheatSheet","permalink":"/better-docs/docs/Angular/host-elements-cheatsheet"}}');var l=t(4848),r=t(8453);const o={id:"component-queries",title:"Referencing Component Children with Queries",sidebar_position:12},s="Referencing Component Children with Queries",c={},d=[{value:"What Are Queries",id:"what-are-queries",level:2},{value:"Query Types (Mental Model)",id:"query-types-mental-model",level:2},{value:"View Queries",id:"view-queries",level:2},{value:"<code>viewChild()</code>",id:"viewchild",level:3},{value:"<code>viewChildren()</code>",id:"viewchildren",level:3},{value:"Content Queries",id:"content-queries",level:2},{value:"<code>contentChild()</code>",id:"contentchild",level:3},{value:"<code>contentChildren()</code>",id:"contentchildren",level:3},{value:"Query Selectors",id:"query-selectors",level:2},{value:"Why Signal-Based Queries",id:"why-signal-based-queries",level:2},{value:"Deprecated: Decorator-Based Queries",id:"deprecated-decorator-based-queries",level:2},{value:"<code>@ViewChild</code> / <code>@ViewChildren</code>",id:"viewchild--viewchildren",level:3},{value:"<code>@ContentChild</code> / <code>@ContentChildren</code>",id:"contentchild--contentchildren",level:3},{value:"Migration Shortcut",id:"migration-shortcut",level:2},{value:"Final Mental Model",id:"final-mental-model",level:2}];function h(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.header,{children:(0,l.jsx)(n.h1,{id:"referencing-component-children-with-queries",children:"Referencing Component Children with Queries"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["How a component references elements, directives, and child components using the ",(0,l.jsx)(n.strong,{children:"modern query APIs"})]}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"what-are-queries",children:"What Are Queries"}),"\n",(0,l.jsxs)(n.p,{children:["Queries let a component ",(0,l.jsx)(n.strong,{children:"reference its children"})," created by Angular."]}),"\n",(0,l.jsx)(n.p,{children:"They are used to:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"call child component APIs"}),"\n",(0,l.jsx)(n.li,{children:"access DOM elements"}),"\n",(0,l.jsx)(n.li,{children:"coordinate layout or behavior"}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Queries expose ",(0,l.jsx)(n.strong,{children:"read-only references"})," that stay in sync with the rendered view."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"query-types-mental-model",children:"Query Types (Mental Model)"}),"\n",(0,l.jsxs)(n.p,{children:["Queries are categorized by ",(0,l.jsx)(n.strong,{children:"where the child comes from"}),":"]}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"View queries"})," \u2192 declared inside the component\u2019s own template"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Content queries"})," \u2192 projected into the component using ",(0,l.jsx)(n.code,{children:"ng-content"})]}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["If the element is written in the template \u2192 ",(0,l.jsx)(n.strong,{children:"view query"}),"\nIf the element comes from the parent \u2192 ",(0,l.jsx)(n.strong,{children:"content query"})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"view-queries",children:"View Queries"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"viewChild()"})," and ",(0,l.jsx)(n.code,{children:"viewChildren()"})," to reference children declared in the component template."]}),"\n",(0,l.jsxs)(n.p,{children:["They return ",(0,l.jsx)(n.strong,{children:"signals"}),", not decorators."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"viewchild",children:(0,l.jsx)(n.code,{children:"viewChild()"})}),"\n",(0,l.jsxs)(n.p,{children:["Returns the ",(0,l.jsx)(n.strong,{children:"first matching child"})," from the component view."]}),"\n",(0,l.jsx)(n.p,{children:"Resolves automatically after view initialization."}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Component, Directive, ElementRef, signal, TemplateRef, viewChild } from '@angular/core';\n\n@Directive({\n  selector: '[highlight]',\n  standalone: true\n})\nexport class HighlightDirective {\n  color = 'yellow';\n}\n\n@Component({\n  selector: 'child-counter',\n  standalone: true,\n  template: `Count: {{count()}}`\n})\nexport class CounterComponent {\n  count = signal(0);\n  inc() { this.count.update(v => v + 1); }\n}\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CounterComponent, HighlightDirective],\n  template: `\n    \x3c!-- Signal ViewChild: template ref --\x3e\n    <input #username type=\"text\" placeholder=\"Type here...\" />\n\n    \x3c!-- Signal ViewChild: child component --\x3e\n    <child-counter></child-counter>\n\n    \x3c!-- Signal ViewChild: directive --\x3e\n    <p highlight>Highlighted text</p>\n\n    \x3c!-- Signal ViewChild: Template --\x3e\n    <ng-template #tpl>\n      <p>This is inside ng-template \ud83d\ude0e</p>\n    </ng-template>\n\n    <button (click)=\"run()\">Run Demo</button>\n  `\n})\nexport class App {\n\n  // 1\ufe0f\u20e3 ElementRef via template reference\n  username = viewChild<ElementRef<HTMLInputElement>>('username');\n\n  // 2\ufe0f\u20e3 Child component\n  counter = viewChild.required(CounterComponent);\n\n  // 3\ufe0f\u20e3 Directive\n  highlight = viewChild(HighlightDirective);\n\n  // 4\ufe0f\u20e3 TemplateRef\n  tpl = viewChild<TemplateRef<any>>('tpl');\n\n  run() {\n    console.log('Input value =', this.username()?.nativeElement.value);\n\n    this.counter().inc();\n    console.log('Counter =', this.counter().count());\n\n    console.log('Highlight color =', this.highlight()?.color);\n\n    console.log('TemplateRef exists =', !!this.tpl());\n  }\n}\n\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"viewchildren",children:(0,l.jsx)(n.code,{children:"viewChildren()"})}),"\n",(0,l.jsxs)(n.p,{children:["Returns ",(0,l.jsx)(n.strong,{children:"all matching children"})," from the component view."]}),"\n",(0,l.jsx)(n.p,{children:"Always stays up to date when the view changes."}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Component, Directive, ElementRef, QueryList, TemplateRef, ViewContainerRef, inject, viewChildren, signal } from '@angular/core';\n\n@Directive({\n  selector: '[highlight]',\n  standalone: true\n})\nexport class HighlightDirective {\n  color = 'yellow';\n}\n\n@Component({\n  selector: 'tag-pill',\n  standalone: true,\n  template: `<span class=\"pill\">{{label}}</span>`,\n  styles: [`.pill{padding:4px 10px;border-radius:20px;background:#eee;margin-right:6px;display:inline-block}`]\n})\nexport class TagPillComponent {\n  label = 'Tag';\n}\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [TagPillComponent, HighlightDirective],\n  template: `\n    \x3c!-- 1\ufe0f\u20e3 ViewChildren: template refs --\x3e\n    <p #item>Apple</p>\n    <p #item>Banana</p>\n    <p #item>Cherry</p>\n\n    \x3c!-- 2\ufe0f\u20e3 ViewChildren: components --\x3e\n    <tag-pill></tag-pill>\n    <tag-pill></tag-pill>\n\n    \x3c!-- 3\ufe0f\u20e3 ViewChildren: directives --\x3e\n    <p highlight>First</p>\n    <p highlight>Second</p>\n\n    <button (click)=\"run()\">Run Demo</button>\n  `\n})\nexport class AppComponent {\n\n  // 1\ufe0f\u20e3 All ElementRefs via template reference\n  items = viewChildren<ElementRef<HTMLParagraphElement>>('item');\n\n  // 2\ufe0f\u20e3 All child components\n  tagPills = viewChildren(TagPillComponent);\n\n  // 3\ufe0f\u20e3 All directive instances\n  highlights = viewChildren(HighlightDirective);\n\n  run() {\n    console.log('--- ElementRefs ---');\n    this.items().forEach(el => console.log(el.nativeElement.textContent?.trim()));\n\n    console.log('--- Components ---');\n    this.tagPills().forEach(cmp => console.log(cmp.label));\n\n    console.log('--- Directives ---');\n    this.highlights().forEach(dir => console.log(dir.color));\n  }\n}\n\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"content-queries",children:"Content Queries"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"contentChild()"})," and ",(0,l.jsx)(n.code,{children:"contentChildren()"})," to reference ",(0,l.jsx)(n.strong,{children:"projected content"}),"."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"contentchild",children:(0,l.jsx)(n.code,{children:"contentChild()"})}),"\n",(0,l.jsxs)(n.p,{children:["Returns the ",(0,l.jsx)(n.strong,{children:"first projected child"})," that matches the selector."]}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Component, Directive, ElementRef, contentChild, contentChildren, viewChild } from '@angular/core';\n\n/* ---------- A directive we will project ---------- */\n@Directive({\n  selector: '[highlight]',\n  standalone: true\n})\nexport class HighlightDirective {\n  color = 'orange';\n}\n\n/* ---------- Child component that ACCEPTS projected content ---------- */\n@Component({\n  selector: 'card-box',\n  standalone: true,\n  template: `\n    <div class=\"box\">\n      <h3><ng-content select=\"[title]\"></ng-content></h3>\n      <section><ng-content></ng-content></section>\n    </div>\n  `,\n  styles: [`.box{padding:12px;border-radius:10px;border:1px solid #ccc;margin-bottom:10px}`]\n})\nexport class CardBoxComponent {\n\n  // 1\ufe0f\u20e3 Single projected element via template ref\n  titleEl = contentChild<ElementRef<HTMLElement>>('title');\n\n  // 2\ufe0f\u20e3 First directive found in projected content\n  highlight = contentChild(HighlightDirective);\n\n  // 3\ufe0f\u20e3 All directives found in projected content\n  highlights = contentChildren(HighlightDirective);\n\n  log() {\n    console.log('Title text =', this.titleEl()?.nativeElement.textContent?.trim());\n\n    console.log('First highlight color =', this.highlight()?.color);\n\n    console.log('All highlights count =', this.highlights().length);\n  }\n}\n\n/* ---------- PARENT projecting content ---------- */\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CardBoxComponent, HighlightDirective],\n  template: `\n    <card-box>\n      <span #title title>Projected Card Title</span>\n\n      <p>This paragraph is projected content.</p>\n\n      <p highlight>Projected with directive 1</p>\n      <p highlight>Projected with directive 2</p>\n    </card-box>\n\n    <button (click)=\"run()\">Run Demo</button>\n  `\n})\nexport class App {\n\n  // Grab the child component\n  box = viewChild(CardBoxComponent);\n\n  run() {\n    console.log(\"run triggered\");\n\n    this.box()?.log();\n  }\n}\n\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h3,{id:"contentchildren",children:(0,l.jsx)(n.code,{children:"contentChildren()"})}),"\n",(0,l.jsxs)(n.p,{children:["Returns ",(0,l.jsx)(n.strong,{children:"all projected children"})," matching a selector."]}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-tabs',\n  standalone: true,\n  template: `<ng-content />`\n})\nexport class TabsComponent {\n  tabs = contentChildren(TabComponent); // Signal<readonly TabComponent[]>\n}\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"query-selectors",children:"Query Selectors"}),"\n",(0,l.jsx)(n.p,{children:"Modern queries accept the same selector types:"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["template reference (",(0,l.jsx)(n.code,{children:"'ref'"}),")"]}),"\n",(0,l.jsx)(n.li,{children:"component class"}),"\n",(0,l.jsx)(n.li,{children:"directive class"}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"ElementRef"})}),"\n",(0,l.jsx)(n.li,{children:(0,l.jsx)(n.code,{children:"TemplateRef"})}),"\n"]}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"viewChild('ref');\nviewChild(MyComponent);\nviewChild(MyDirective);\nviewChild(ElementRef);\nviewChild(TemplateRef);\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"why-signal-based-queries",children:"Why Signal-Based Queries"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsx)(n.li,{children:"No lifecycle hooks required"}),"\n",(0,l.jsx)(n.li,{children:"Always up to date"}),"\n",(0,l.jsx)(n.li,{children:"Lazy and safe access"}),"\n",(0,l.jsx)(n.li,{children:"Works naturally with computed and effects"}),"\n"]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"deprecated-decorator-based-queries",children:"Deprecated: Decorator-Based Queries"}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsx)(n.p,{children:"\u26a0\ufe0f Legacy API. Avoid in new Angular 19+ code."}),"\n"]}),"\n",(0,l.jsxs)(n.p,{children:["Before signal-based queries, Angular used decorators and ",(0,l.jsx)(n.code,{children:"QueryList"}),"."]}),"\n",(0,l.jsxs)(n.p,{children:["They still work but are ",(0,l.jsx)(n.strong,{children:"not recommended"})," going forward."]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.h3,{id:"viewchild--viewchildren",children:[(0,l.jsx)(n.code,{children:"@ViewChild"})," / ",(0,l.jsx)(n.code,{children:"@ViewChildren"})]}),"\n",(0,l.jsx)(n.p,{children:"Access children declared in the component template."}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"import { Component, Directive, ElementRef, TemplateRef, ViewChild } from '@angular/core';\n\n@Directive({\n  selector: '[highlight]',\n  standalone: true\n})\nexport class HighlightDirective {\n  color = 'yellow';\n}\n\n@Component({\n  selector: 'child-counter',\n  standalone: true,\n  template: `Count: {{count}}`\n})\nexport class CounterComponent {\n  count = 0;\n  inc() { this.count++; }\n}\n\n@Component({\n  selector: 'app-root',\n  standalone: true,\n  imports: [CounterComponent, HighlightDirective],\n  template: `\n    \x3c!-- ViewChild via template ref --\x3e\n    <input #username type=\"text\" placeholder=\"Type here...\" />\n\n    \x3c!-- ViewChild child component --\x3e\n    <child-counter></child-counter>\n\n    \x3c!-- ViewChild directive --\x3e\n    <p highlight>Highlighted text</p>\n\n    \x3c!-- ViewChild template --\x3e\n    <ng-template #tpl>\n      <p>This is inside ng-template</p>\n    </ng-template>\n\n    <button (click)=\"run()\">Run Demo</button>\n  `\n})\nexport class App {\n\n  // 1\ufe0f\u20e3 Template reference variable\n  @ViewChild('username')\n  username!: ElementRef<HTMLInputElement>;\n\n  // 2\ufe0f\u20e3 Child component\n  @ViewChild(CounterComponent)\n  counter!: CounterComponent;\n\n  // 3\ufe0f\u20e3 Directive instance\n  @ViewChild(HighlightDirective)\n  highlight!: HighlightDirective;\n\n  // 4\ufe0f\u20e3 TemplateRef\n  @ViewChild('tpl')\n  tpl!: TemplateRef<any>;\n\n  run() {\n    console.log('Input value =', this.username.nativeElement.value);\n\n    this.counter.inc();\n    console.log('Counter =', this.counter.count);\n\n    console.log('Highlight color =', this.highlight.color);\n\n    console.log('TemplateRef exists =', !!this.tpl);\n  }\n}\n\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsxs)(n.h3,{id:"contentchild--contentchildren",children:[(0,l.jsx)(n.code,{children:"@ContentChild"})," / ",(0,l.jsx)(n.code,{children:"@ContentChildren"})]}),"\n",(0,l.jsxs)(n.p,{children:["Access projected content provided via ",(0,l.jsx)(n.code,{children:"ng-content"}),"."]}),"\n",(0,l.jsxs)(t,{children:[(0,l.jsx)("summary",{children:"Example"}),(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-ts",children:"@Component({\n  selector: 'app-tabs',\n  template: `<ng-content />`\n})\nexport class TabsComponent implements AfterContentInit {\n  @ContentChildren(TabComponent)\n  tabs!: QueryList<TabComponent>;\n\n  ngAfterContentInit() {\n    console.log(this.tabs.length);\n  }\n}\n"})})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"migration-shortcut",children:"Migration Shortcut"}),"\n",(0,l.jsxs)(n.table,{children:[(0,l.jsx)(n.thead,{children:(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.th,{children:"Legacy"}),(0,l.jsx)(n.th,{children:"Angular 19+"})]})}),(0,l.jsxs)(n.tbody,{children:[(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"@ViewChild"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"viewChild()"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"@ViewChildren"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"viewChildren()"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"@ContentChild"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"contentChild()"})})]}),(0,l.jsxs)(n.tr,{children:[(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"@ContentChildren"})}),(0,l.jsx)(n.td,{children:(0,l.jsx)(n.code,{children:"contentChildren()"})})]})]})]}),"\n",(0,l.jsx)(n.hr,{}),"\n",(0,l.jsx)(n.h2,{id:"final-mental-model",children:"Final Mental Model"}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"View"})," \u2192 what the component renders"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Content"})," \u2192 what the parent provides"]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Single"})," \u2192 ",(0,l.jsx)(n.code,{children:"*Child()"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Multiple"})," \u2192 ",(0,l.jsx)(n.code,{children:"*Children()"})]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.strong,{children:"Modern Angular"})," \u2192 signals, not decorators"]}),"\n"]})]})}function a(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(h,{...e})}):h(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>s});var i=t(6540);const l={},r=i.createContext(l);function o(e){const n=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:o(e.components),i.createElement(r.Provider,{value:n},e.children)}}}]);