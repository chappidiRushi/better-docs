"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[418],{503(e,n,t){t.r(n),t.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"React/advanced-state-management","title":"Advanced State Management","description":"----------------","source":"@site/docs/React/Advanced State Management.md","sourceDirName":"React","slug":"/React/advanced-state-management","permalink":"/better-docs/docs/React/advanced-state-management","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/React/Advanced State Management.md","tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"id":"advanced-state-management","title":"Advanced State Management","sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"Hooks","permalink":"/better-docs/docs/React/hooks"},"next":{"title":"Performance And Optimization","permalink":"/better-docs/docs/React/performance-and-optimization"}}');var r=t(4848),i=t(8453);const o={id:"advanced-state-management",title:"Advanced State Management",sidebar_position:6},l=void 0,c={},d=[{value:"Mental Model",id:"mental-model",level:2},{value:"Context API",id:"context-api",level:2},{value:"When to Use Context",id:"when-to-use-context",level:3},{value:"Core Context APIs",id:"core-context-apis",level:3},{value:"Context Performance Patterns (Often Missed)",id:"context-performance-patterns-often-missed",level:2},{value:"Splitting Contexts",id:"splitting-contexts",level:3},{value:"Memoizing Provider Values",id:"memoizing-provider-values",level:3},{value:"Custom Hooks",id:"custom-hooks",level:2},{value:"Rules",id:"rules",level:3},{value:"Reducers (<code>useReducer</code>)",id:"reducers-usereducer",level:2},{value:"When to Prefer <code>useReducer</code>",id:"when-to-prefer-usereducer",level:3},{value:"Reducer + Context (Global State Pattern)",id:"reducer--context-global-state-pattern",level:2},{value:"Prop Drilling vs Context",id:"prop-drilling-vs-context",level:2},{value:"External State &amp; Stores (Often Missing)",id:"external-state--stores-often-missing",level:2},{value:"React Integration Hook",id:"react-integration-hook",level:3},{value:"Common Mistakes",id:"common-mistakes",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function a(e){const n={code:"code",em:"em",h2:"h2",h3:"h3",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"mental-model",children:"Mental Model"}),"\n",(0,r.jsxs)(n.p,{children:["Before tools, understand ",(0,r.jsx)(n.em,{children:"where state should live"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Local state"})," \u2192 component (",(0,r.jsx)(n.code,{children:"useState"}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shared state (few levels)"})," \u2192 lift state up"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Shared state (many levels)"})," \u2192 Context"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Complex transitions"})," \u2192 Reducers"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Reusable logic"})," \u2192 Custom hooks"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"App\u2011wide / external"})," \u2192 External stores"]}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"context-api",children:"Context API"}),"\n",(0,r.jsxs)(n.p,{children:["The ",(0,r.jsx)(n.strong,{children:"Context API"})," lets you share values across the component tree ",(0,r.jsx)(n.strong,{children:"without prop drilling"}),"."]}),"\n",(0,r.jsx)(n.h3,{id:"when-to-use-context",children:"When to Use Context"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Theme, locale, auth user"}),"\n",(0,r.jsx)(n.li,{children:"Feature flags"}),"\n",(0,r.jsx)(n.li,{children:"Global configuration"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"\u274c Not ideal for rapidly changing values (can cause re\u2011renders)."}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h3,{id:"core-context-apis",children:"Core Context APIs"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"API / Hook"}),(0,r.jsx)(n.th,{children:"Simple Definition"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"createContext"})}),(0,r.jsx)(n.td,{children:"Create a context object"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"Provider"})}),(0,r.jsx)(n.td,{children:"Supply a value to descendants"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"useContext"})}),(0,r.jsx)(n.td,{children:"Consume the nearest provider value"})]})]})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example: Context"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { createContext, useContext } from 'react';\n\nconst ThemeContext = createContext('light');\n\nfunction Toolbar() {\n  const theme = useContext(ThemeContext);\n  return <button className={theme}>Theme Button</button>;\n}\n\nfunction App() {\n  return (\n    <ThemeContext.Provider value=\"dark\">\n      <Toolbar />\n    </ThemeContext.Provider>\n  );\n}\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"context-performance-patterns-often-missed",children:"Context Performance Patterns (Often Missed)"}),"\n",(0,r.jsx)(n.h3,{id:"splitting-contexts",children:"Splitting Contexts"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"One context per concern"}),"\n",(0,r.jsx)(n.li,{children:'Avoid "mega contexts"'}),"\n"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const AuthContext = createContext(null);\nconst ThemeContext = createContext('light');\n"})}),"\n",(0,r.jsx)(n.h3,{id:"memoizing-provider-values",children:"Memoizing Provider Values"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const value = useMemo(() => ({ user, login }), [user]);\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"custom-hooks",children:"Custom Hooks"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Custom hooks"})," extract and reuse stateful logic."]}),"\n",(0,r.jsx)(n.h3,{id:"rules",children:"Rules"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Must start with ",(0,r.jsx)(n.code,{children:"use"})]}),"\n",(0,r.jsx)(n.li,{children:"Can call other hooks"}),"\n",(0,r.jsx)(n.li,{children:"No JSX inside custom hooks"}),"\n"]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example: Custom Hook"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { useState, useEffect } from 'react';\n\nfunction useWindowWidth() {\n  const [width, setWidth] = useState(window.innerWidth);\n\n  useEffect(() => {\n    const onResize = () => setWidth(window.innerWidth);\n    window.addEventListener('resize', onResize);\n    return () => window.removeEventListener('resize', onResize);\n  }, []);\n\n  return width;\n}\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsxs)(n.h2,{id:"reducers-usereducer",children:["Reducers (",(0,r.jsx)(n.code,{children:"useReducer"}),")"]}),"\n",(0,r.jsxs)(n.p,{children:["Reducers centralize ",(0,r.jsx)(n.strong,{children:"state transitions"})," and make updates predictable."]}),"\n",(0,r.jsxs)(n.h3,{id:"when-to-prefer-usereducer",children:["When to Prefer ",(0,r.jsx)(n.code,{children:"useReducer"})]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Multiple related state values"}),"\n",(0,r.jsx)(n.li,{children:"Complex update logic"}),"\n",(0,r.jsx)(n.li,{children:"State transitions depend on previous state"}),"\n"]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example: useReducer"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"import { useReducer } from 'react';\n\nfunction reducer(state, action) {\n  switch (action.type) {\n    case 'inc': return { count: state.count + 1 };\n    case 'dec': return { count: state.count - 1 };\n    default: return state;\n  }\n}\n\nfunction Counter() {\n  const [state, dispatch] = useReducer(reducer, { count: 0 });\n\n  return (\n    <>\n      <p>{state.count}</p>\n      <button onClick={() => dispatch({ type: 'inc' })}>+</button>\n      <button onClick={() => dispatch({ type: 'dec' })}>-</button>\n    </>\n  );\n}\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"reducer--context-global-state-pattern",children:"Reducer + Context (Global State Pattern)"}),"\n",(0,r.jsx)(n.p,{children:"This pattern replaces small Redux\u2011like use cases."}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example: Context + Reducer"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"const CountContext = createContext();\n\nfunction reducer(state, action) {\n  if (action.type === 'inc') return state + 1;\n  return state;\n}\n\nfunction Provider({ children }) {\n  const [state, dispatch] = useReducer(reducer, 0);\n  return (\n    <CountContext.Provider value={{ state, dispatch }}>\n      {children}\n    </CountContext.Provider>\n  );\n}\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"prop-drilling-vs-context",children:"Prop Drilling vs Context"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Pattern"}),(0,r.jsx)(n.th,{children:"Description"}),(0,r.jsx)(n.th,{children:"When to Use"})]})}),(0,r.jsxs)(n.tbody,{children:[(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Prop Drilling"}),(0,r.jsx)(n.td,{children:"Pass props through layers"}),(0,r.jsx)(n.td,{children:"Small trees"})]}),(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:"Context"}),(0,r.jsx)(n.td,{children:"Implicit dependency"}),(0,r.jsx)(n.td,{children:"Deep trees"})]})]})]}),"\n",(0,r.jsxs)(t,{children:[(0,r.jsx)("summary",{children:"Example Comparison"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Prop drilling\nfunction Child({ theme }) { return <p>{theme}</p>; }\nfunction Parent({ theme }) { return <Child theme={theme} />; }\n\n// Context\nconst ThemeContext = createContext('light');\nfunction ChildCtx() {\n  return <p>{useContext(ThemeContext)}</p>;\n}\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"external-state--stores-often-missing",children:"External State & Stores (Often Missing)"}),"\n",(0,r.jsxs)(n.p,{children:["For ",(0,r.jsx)(n.strong,{children:"app\u2011wide or cross\u2011framework state"}),":"]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Redux / Redux Toolkit"}),"\n",(0,r.jsx)(n.li,{children:"Zustand"}),"\n",(0,r.jsx)(n.li,{children:"Jotai"}),"\n",(0,r.jsx)(n.li,{children:"MobX"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"react-integration-hook",children:"React Integration Hook"}),"\n",(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{children:"Hook"}),(0,r.jsx)(n.th,{children:"Purpose"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{children:(0,r.jsx)(n.code,{children:"useSyncExternalStore"})}),(0,r.jsx)(n.td,{children:"Safe subscription to external stores"})]})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"common-mistakes",children:"Common Mistakes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Overusing context for frequently changing state"}),"\n",(0,r.jsx)(n.li,{children:"Putting UI\u2011local state in global stores"}),"\n",(0,r.jsx)(n.li,{children:"Creating new provider values on every render"}),"\n",(0,r.jsx)(n.li,{children:"Mixing unrelated concerns in one reducer"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Start local, scale state ",(0,r.jsx)(n.strong,{children:"only when needed"})]}),"\n",(0,r.jsxs)(n.li,{children:["Context solves ",(0,r.jsx)(n.strong,{children:"prop drilling"}),", not all state"]}),"\n",(0,r.jsx)(n.li,{children:"Reducers make complex updates predictable"}),"\n",(0,r.jsx)(n.li,{children:"Custom hooks are the foundation of reuse"}),"\n",(0,r.jsxs)(n.li,{children:["External stores are for ",(0,r.jsx)(n.strong,{children:"cross\u2011app state"})]}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(a,{...e})}):a(e)}},8453(e,n,t){t.d(n,{R:()=>o,x:()=>l});var s=t(6540);const r={},i=s.createContext(r);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);