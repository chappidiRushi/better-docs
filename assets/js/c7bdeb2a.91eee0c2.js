"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[3497],{5090(e,n,s){s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>a,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"Angular/pwa","title":"Service Workers & PWA","description":"Angular Service Workers turn your Angular app into a Progressive Web App (PWA) with offline support, caching, background updates, and push notifications.","source":"@site/docs/Angular/pwa.md","sourceDirName":"Angular","slug":"/Angular/pwa","permalink":"/docs/Angular/pwa","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/Angular/pwa.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Programmatic Rendering","permalink":"/docs/Angular/programmatic-rendering"},"next":{"title":"Reactive Forms","permalink":"/docs/Angular/reactive-forms"}}');var i=s(4848),l=s(8453);const a={},t="Service Workers & PWA",c={},o=[{value:"Overview",id:"overview",level:2},{value:"Enable PWA Support (Angular 21)",id:"enable-pwa-support-angular-21",level:2},{value:"Service Worker Registration",id:"service-worker-registration",level:2},{value:"<code>ngsw-config.json</code> \u2014 Caching Strategy",id:"ngsw-configjson--caching-strategy",level:2},{value:"App Manifest (<code>manifest.webmanifest</code>)",id:"app-manifest-manifestwebmanifest",level:2},{value:"Detect &amp; Apply Updates (<code>SwUpdate</code>)",id:"detect--apply-updates-swupdate",level:2},{value:"Push Notifications (<code>SwPush</code>)",id:"push-notifications-swpush",level:2},{value:"Build &amp; Test PWA",id:"build--test-pwa",level:2},{value:"Common Strategies",id:"common-strategies",level:2},{value:"Debugging Service Workers",id:"debugging-service-workers",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"Notes vs Web Workers",id:"notes-vs-web-workers",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"service-workers--pwa",children:"Service Workers & PWA"})}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"Angular Service Workers"})," turn your Angular app into a Progressive Web App (PWA) with offline support, caching, background updates, and push notifications."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service Workers"})," run in the browser background separate from the main thread."]}),"\n",(0,i.jsxs)(n.li,{children:["Angular ships a ",(0,i.jsx)(n.strong,{children:"built\u2011in service worker"})," (",(0,i.jsx)(n.code,{children:"@angular/service-worker"}),")."]}),"\n",(0,i.jsxs)(n.li,{children:["Enabled automatically when ",(0,i.jsx)(n.strong,{children:"building for production"}),"."]}),"\n",(0,i.jsxs)(n.li,{children:["Provides ",(0,i.jsx)(n.strong,{children:"offline caching, faster loads, update control, and push"}),"."]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"enable-pwa-support-angular-21",children:"Enable PWA Support (Angular 21)"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ng add @angular/pwa --project=my-app --skipInstall=false --skipConfirm=false\n"})})]}),"\n",(0,i.jsx)(n.p,{children:"Adds:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"ngsw-config.json"})," \u2192 SW config"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"manifest.webmanifest"})," \u2192 PWA metadata"]}),"\n",(0,i.jsx)(n.li,{children:"Icons"}),"\n",(0,i.jsxs)(n.li,{children:["Registers SW in ",(0,i.jsx)(n.code,{children:"main.ts"})]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"service-worker-registration",children:"Service Worker Registration"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { bootstrapApplication } from '@angular/platform-browser';\nimport { provideServiceWorker } from '@angular/service-worker';\nimport { AppComponent } from './app/app.component';\nimport { isDevMode } from '@angular/core';\n\nbootstrapApplication(AppComponent, {\n  providers: [\n    provideServiceWorker('ngsw-worker.js', {\n      enabled: !isDevMode(),        // only enable in production\n      registrationStrategy: 'registerWhenStable:30000' // lazy register\n    })\n  ]\n});\n"})})]}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.code,{children:"registrationStrategy"})," options:"]}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"registerImmediately"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"registerWhenStable[:timeout]"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"registerWithDelay:<ms>"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"ngsw-configjson--caching-strategy",children:[(0,i.jsx)(n.code,{children:"ngsw-config.json"})," \u2014 Caching Strategy"]}),"\n",(0,i.jsx)(n.p,{children:"Defines what & how Angular SW caches."}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "$schema": "https://angular.dev/assets/schemas/ngsw-config.schema.json",\n  "index": "/index.html",\n  "assetGroups": [\n    {\n      "name": "app",\n      "installMode": "prefetch",          // prefetch | lazy\n      "updateMode": "prefetch",           // prefetch | lazy\n      "resources": {\n        "files": [\n          "/favicon.ico",\n          "/index.html",\n          "/*.css",\n          "/*.js"\n        ]\n      }\n    },\n    {\n      "name": "assets",\n      "installMode": "lazy",\n      "updateMode": "prefetch",\n      "resources": {\n        "files": [\n          "/assets/**",\n          "/*.(png|jpg|svg|webp)"\n        ]\n      }\n    }\n  ],\n  "dataGroups": [\n    {\n      "name": "api-cache",\n      "urls": [\n        "/api/**"\n      ],\n      "cacheConfig": {\n        "strategy": "performance",       // performance | freshness\n        "maxSize": 100,\n        "maxAge": "1d",\n        "timeout": "10s"\n      }\n    }\n  ],\n  "navigationUrls": [\n    { "positive": true, "regex": ".*" },\n    { "positive": false, "regex": "/api/.*" }\n  ]\n}\n'})})]}),"\n",(0,i.jsx)(n.p,{children:"Key values:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"assetGroups"})," \u2192 static files"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"dataGroups"})," \u2192 API/network caching"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"strategy"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"performance"})," (cache\u2011first)"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"freshness"})," (network\u2011first)"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"app-manifest-manifestwebmanifest",children:["App Manifest (",(0,i.jsx)(n.code,{children:"manifest.webmanifest"}),")"]}),"\n",(0,i.jsx)(n.p,{children:"Describes installable app metadata."}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-json",children:'{\n  "name": "My Angular PWA",\n  "short_name": "MyPWA",\n  "start_url": "/",\n  "display": "standalone",       // fullscreen | minimal-ui | browser\n  "background_color": "#ffffff",\n  "theme_color": "#1976d2",\n  "icons": [\n    {\n      "src": "assets/icons/icon-192x192.png",\n      "sizes": "192x192",\n      "type": "image/png"\n    },\n    {\n      "src": "assets/icons/icon-512x512.png",\n      "sizes": "512x512",\n      "type": "image/png"\n    }\n  ]\n}\n'})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"detect--apply-updates-swupdate",children:["Detect & Apply Updates (",(0,i.jsx)(n.code,{children:"SwUpdate"}),")"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { Component, inject } from '@angular/core';\nimport { SwUpdate } from '@angular/service-worker';\n\n@Component({\n  standalone: true,\n  selector: 'app-update-handler',\n  template: ''\n})\nexport class UpdateHandlerComponent {\n  swUpdate = inject(SwUpdate);\n\n  constructor() {\n    this.swUpdate.versionUpdates.subscribe(event => {\n      if (event.type === 'VERSION_READY') {\n        if (confirm('New version available. Reload?')) {\n          location.reload();\n        }\n      }\n    });\n  }\n}\n"})})]}),"\n",(0,i.jsx)(n.p,{children:"Other APIs:"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"swUpdate.checkForUpdate()"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.code,{children:"swUpdate.activateUpdate()"})}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsxs)(n.h2,{id:"push-notifications-swpush",children:["Push Notifications (",(0,i.jsx)(n.code,{children:"SwPush"}),")"]}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"import { Component, inject } from '@angular/core';\nimport { SwPush } from '@angular/service-worker';\n\n@Component({ standalone: true, template: '' })\nexport class PushComponent {\n  swPush = inject(SwPush);\n  VAPID_PUBLIC_KEY = 'YOUR_PUBLIC_VAPID_KEY';\n\n  subscribe() {\n    this.swPush.requestSubscription({\n      serverPublicKey: this.VAPID_PUBLIC_KEY\n    }).then(sub => {\n      // send sub to backend\n    }).catch(err => console.error(err));\n  }\n}\n"})})]}),"\n",(0,i.jsxs)(n.blockquote,{children:["\n",(0,i.jsx)(n.p,{children:"Requires backend push service (Web Push protocol)."}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"build--test-pwa",children:"Build & Test PWA"}),"\n",(0,i.jsxs)(s,{children:[(0,i.jsx)("summary",{children:"Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ng build --configuration production\nnpx http-server -p 8080 ./dist/my-app\n"})})]}),"\n",(0,i.jsxs)(n.p,{children:["Service worker ",(0,i.jsx)(n.strong,{children:"only runs over HTTPS or localhost"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"common-strategies",children:"Common Strategies"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["Static assets \u2192 ",(0,i.jsx)(n.code,{children:"assetGroups"})," + ",(0,i.jsx)(n.code,{children:"prefetch"})]})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsxs)(n.strong,{children:["API requests \u2192 ",(0,i.jsx)(n.code,{children:"dataGroups"})]})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"performance"})," for rarely changing data"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.code,{children:"freshness"})," for real\u2011time data"]}),"\n"]}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Lazy load large assets"})}),"\n"]}),"\n",(0,i.jsxs)(n.li,{children:["\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Trigger user\u2011friendly update prompt"})}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"debugging-service-workers",children:"Debugging Service Workers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Chrome DevTools \u2192 Application \u2192 Service Workers"}),"\n",(0,i.jsxs)(n.li,{children:["Check ",(0,i.jsx)(n.code,{children:"ngsw.json"})," under Network tab"]}),"\n",(0,i.jsx)(n.li,{children:"Clear storage to reset cache"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Enable SW only in production"}),"\n",(0,i.jsx)(n.li,{children:"Avoid caching auth tokens or private data"}),"\n",(0,i.jsxs)(n.li,{children:["Set sensible ",(0,i.jsx)(n.code,{children:"maxAge"})," + ",(0,i.jsx)(n.code,{children:"maxSize"})]}),"\n",(0,i.jsx)(n.li,{children:"Provide manual refresh prompt"}),"\n",(0,i.jsx)(n.li,{children:"Version APIs to avoid stale data"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"notes-vs-web-workers",children:"Notes vs Web Workers"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Service Workers"})," \u2192 offline, caching, push, proxy network"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Web Workers"})," \u2192 CPU\u2011heavy background computation"]}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"They solve different problems."}),"\n",(0,i.jsx)(n.hr,{})]})}function h(e={}){const{wrapper:n}={...(0,l.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>a,x:()=>t});var r=s(6540);const i={},l=r.createContext(i);function a(e){const n=r.useContext(l);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function t(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:a(e.components),r.createElement(l.Provider,{value:n},e.children)}}}]);