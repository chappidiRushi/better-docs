"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[8200],{4729(e,n,s){s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>t,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"mongo/mongodb-monitoring-operations","title":"Monitoring and Operations","description":"-----------------","source":"@site/docs/mongo/Monitoring and Opertations.md","sourceDirName":"mongo","slug":"/mongo/mongodb-monitoring-operations","permalink":"/better-docs/docs/mongo/mongodb-monitoring-operations","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/mongo/Monitoring and Opertations.md","tags":[],"version":"current","sidebarPosition":18,"frontMatter":{"id":"mongodb-monitoring-operations","title":"Monitoring and Operations","sidebar_position":18},"sidebar":"tutorialSidebar","previous":{"title":"Backup, Restore, and Disaster Recovery","permalink":"/better-docs/docs/mongo/mongodb-backup-restore-dr"},"next":{"title":"Deployment Architectures","permalink":"/better-docs/docs/mongo/mongodb-deployment-architectures"}}');var r=s(4848),o=s(8453);const t={id:"mongodb-monitoring-operations",title:"Monitoring and Operations",sidebar_position:18},l=void 0,a={},c=[{value:"Metrics and Telemetry",id:"metrics-and-telemetry",level:2},{value:"Profiling",id:"profiling",level:2},{value:"Slow Query Logs",id:"slow-query-logs",level:2},{value:"Capacity Planning",id:"capacity-planning",level:2},{value:"Alerting Strategies",id:"alerting-strategies",level:2},{value:"Notes",id:"notes",level:2},{value:"Caveats",id:"caveats",level:2}];function d(e){const n={blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components},{Details:s}=n;return s||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"metrics-and-telemetry",children:"Metrics and Telemetry"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Continuous measurement of server, storage, and query behavior"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Exposed via ",(0,r.jsx)(n.code,{children:"serverStatus"}),", ",(0,r.jsx)(n.code,{children:"dbStats"}),", ",(0,r.jsx)(n.code,{children:"collStats"})]}),"\n",(0,r.jsx)(n.li,{children:"Includes memory, connections, locks, cache, ops/sec"}),"\n",(0,r.jsx)(n.li,{children:"Foundation for alerting and capacity planning"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples (Node.js)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Server-level telemetry\nconst status = await adminDb.command({ serverStatus: 1 });\nstatus.mem;            // RAM usage\nstatus.connections;    // current / available\nstatus.opcounters;     // insert/query/update/delete\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"profiling",children:"Profiling"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Capturing query execution details at runtime"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Uses system.profile collection"}),"\n",(0,r.jsx)(n.li,{children:"Levels: 0 (off), 1 (slow ops), 2 (all ops)"}),"\n",(0,r.jsx)(n.li,{children:"High overhead at level 2"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples (Node.js)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Enable slow operation profiling\ndb.setProfilingLevel(1, { slowms: 100 });\n\n// Read profiler data\nconst slowQueries = await db.collection('system.profile').find().limit(5).toArray();\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"slow-query-logs",children:"Slow Query Logs"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Logging queries exceeding latency thresholds"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Controlled via ",(0,r.jsx)(n.code,{children:"slowms"})," and ",(0,r.jsx)(n.code,{children:"logLevel"})]}),"\n",(0,r.jsx)(n.li,{children:"Logged to mongod logs"}),"\n",(0,r.jsx)(n.li,{children:"Preferred over profiler in production"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples (Node.js)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Adjust slow query threshold\nawait adminDb.command({ setParameter: 1, slowms: 50 });\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"capacity-planning",children:"Capacity Planning"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Ensuring resources meet workload demands"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Based on working set size"}),"\n",(0,r.jsx)(n.li,{children:"Monitor disk IOPS, cache eviction, replication lag"}),"\n",(0,r.jsx)(n.li,{children:"Scale reads, writes, or storage independently"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples (Node.js)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Collection-level stats\nconst stats = await db.collection('orders').stats();\nstats.storageSize;   // disk\nstats.totalIndexSize; // index footprint\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"alerting-strategies",children:"Alerting Strategies"}),"\n",(0,r.jsxs)(n.blockquote,{children:["\n",(0,r.jsx)(n.p,{children:"Proactive detection of failures and regressions"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Interview points"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Alert on lag, memory pressure, disk usage, elections"}),"\n",(0,r.jsx)(n.li,{children:"Prefer symptom-based alerts over raw metrics"}),"\n",(0,r.jsx)(n.li,{children:"Avoid noisy thresholds"}),"\n"]}),"\n",(0,r.jsxs)(s,{children:[(0,r.jsx)("summary",{children:"Examples (Node.js)"}),(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"// Replication lag check\nconst repl = await adminDb.command({ replSetGetStatus: 1 });\nrepl.members.forEach(m => {\n  if (m.stateStr === 'SECONDARY') {\n    console.log(m.name, m.optimeDate);\n  }\n});\n"})})]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"notes",children:"Notes"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Always baseline metrics under normal load"}),"\n",(0,r.jsx)(n.li,{children:"Monitor trends, not snapshots"}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"caveats",children:"Caveats"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Profiling can distort performance"}),"\n",(0,r.jsx)(n.li,{children:"Excessive alerts cause alert fatigue"}),"\n",(0,r.jsx)(n.li,{children:"Metrics without context are misleading"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453(e,n,s){s.d(n,{R:()=>t,x:()=>l});var i=s(6540);const r={},o=i.createContext(r);function t(e){const n=i.useContext(o);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),i.createElement(o.Provider,{value:n},e.children)}}}]);