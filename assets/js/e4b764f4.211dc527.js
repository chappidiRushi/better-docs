"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[4725],{5711(e,n,r){r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>s,toc:()=>d});const s=JSON.parse('{"id":"React/pattern-and-architecture","title":"Patterns and Architecture","description":"----------------","source":"@site/docs/React/Pattern & Architecture.md","sourceDirName":"React","slug":"/React/pattern-and-architecture","permalink":"/better-docs/docs/React/pattern-and-architecture","draft":false,"unlisted":false,"editUrl":"https://github.com/chappidirushi/better-docs/tree/main/docs/React/Pattern & Architecture.md","tags":[],"version":"current","sidebarPosition":8,"frontMatter":{"id":"pattern-and-architecture","title":"Patterns and Architecture","sidebar_position":8},"sidebar":"tutorialSidebar","previous":{"title":"Performance And Optimization","permalink":"/better-docs/docs/React/performance-and-optimization"},"next":{"title":"Error Handling & Edge Features","permalink":"/better-docs/docs/React/error-handling-and-edge-features"}}');var t=r(4848),i=r(8453);const o={id:"pattern-and-architecture",title:"Patterns and Architecture",sidebar_position:8},l=void 0,c={},d=[{value:"Higher-Order Components (HOC)",id:"higher-order-components-hoc",level:2},{value:"Render Props Pattern",id:"render-props-pattern",level:2},{value:"Container / Presentational Pattern",id:"container--presentational-pattern",level:2},{value:"Component Composition",id:"component-composition",level:2},{value:"Compound Components Pattern",id:"compound-components-pattern",level:2},{value:"Controlled vs Uncontrolled Components",id:"controlled-vs-uncontrolled-components",level:2},{value:"Provider / Dependency Injection Pattern",id:"provider--dependency-injection-pattern",level:2},{value:"Feature-Based Architecture (Recommended)",id:"feature-based-architecture-recommended",level:2},{value:"State Ownership Rules",id:"state-ownership-rules",level:2},{value:"Anti-Patterns to Avoid",id:"anti-patterns-to-avoid",level:2},{value:"Key Takeaways",id:"key-takeaways",level:2}];function a(e){const n={blockquote:"blockquote",code:"code",h2:"h2",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components},{Details:r}=n;return r||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.h2,{id:"higher-order-components-hoc",children:"Higher-Order Components (HOC)"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"Higher-Order Component"})," is a function that takes a component and returns a new component with enhanced behavior."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key characteristics"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Logic reuse through wrapping"}),"\n",(0,t.jsx)(n.li,{children:"Props are passed through to the wrapped component"}),"\n",(0,t.jsx)(n.li,{children:"Common in pre-hooks React"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When to use"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Cross-cutting concerns (logging, permissions)"}),"\n",(0,t.jsx)(n.li,{children:"Legacy codebases"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"When to avoid"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"New code (prefer hooks)"}),"\n",(0,t.jsx)(n.li,{children:'Deep wrapper chains ("wrapper hell")'}),"\n"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Example: HOC"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function withLogger(WrappedComponent) {\n  return function LoggerWrapper(props) {\n    console.log('Rendering', WrappedComponent.name);\n    return <WrappedComponent {...props} />;\n  };\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"render-props-pattern",children:"Render Props Pattern"}),"\n",(0,t.jsxs)(n.p,{children:["A ",(0,t.jsx)(n.strong,{children:"render prop"})," is a function passed as a prop that determines what a component renders."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Key idea"}),":"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Invert control of rendering while sharing logic."}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Pros"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Very flexible"}),"\n",(0,t.jsx)(n.li,{children:"Explicit data flow"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Cons"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Can lead to deeply nested JSX"}),"\n",(0,t.jsx)(n.li,{children:"Harder to read at scale"}),"\n"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Example: Render Props"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function MouseTracker({ render }) {\n  const [pos, setPos] = React.useState({ x: 0, y: 0 });\n\n  return (\n    <div onMouseMove={e => setPos({ x: e.clientX, y: e.clientY })}>\n      {render(pos)}\n    </div>\n  );\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"container--presentational-pattern",children:"Container / Presentational Pattern"}),"\n",(0,t.jsxs)(n.p,{children:["Separates ",(0,t.jsx)(n.strong,{children:"data & logic"})," from ",(0,t.jsx)(n.strong,{children:"UI rendering"}),"."]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Container"}),": state, side effects, data fetching"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"Presentational"}),": pure UI, props only"]}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Easier testing"}),"\n",(0,t.jsx)(n.li,{children:"Clear separation of concerns"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Modern note"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Often replaced by hooks, but still useful conceptually"}),"\n"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Example: Container vs Presentational"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"function UserList({ users }) {\n  return <ul>{users.map(u => <li key={u.id}>{u.name}</li>)}</ul>;\n}\n\nfunction UserListContainer() {\n  const [users, setUsers] = React.useState([]);\n\n  React.useEffect(() => {\n    fetch('/api/users').then(r => r.json()).then(setUsers);\n  }, []);\n\n  return <UserList users={users} />;\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"component-composition",children:"Component Composition"}),"\n",(0,t.jsxs)(n.p,{children:["Composition builds complex UIs from ",(0,t.jsx)(n.strong,{children:"small, reusable pieces"}),"."]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Core principle"}),":"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsx)(n.p,{children:"Prefer composition over inheritance."}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"Common techniques:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:(0,t.jsx)(n.code,{children:"children"})}),"\n",(0,t.jsx)(n.li,{children:"Slot props"}),"\n",(0,t.jsx)(n.li,{children:"Conditional composition"}),"\n"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Example: Composition"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:'function Card({ title, children }) {\n  return (\n    <div className="card">\n      <h2>{title}</h2>\n      {children}\n    </div>\n  );\n}\n'})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"compound-components-pattern",children:"Compound Components Pattern"}),"\n",(0,t.jsx)(n.p,{children:"Multiple components share state implicitly via context."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Flexible APIs"}),"\n",(0,t.jsx)(n.li,{children:"Declarative usage"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Used by"}),": Radix UI, Reach UI"]}),"\n",(0,t.jsxs)(r,{children:[(0,t.jsx)("summary",{children:"Example: Compound Components"}),(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"const TabsContext = React.createContext();\n\nfunction Tabs({ children }) {\n  const [active, setActive] = React.useState(0);\n  return (\n    <TabsContext.Provider value={{ active, setActive }}>\n      {children}\n    </TabsContext.Provider>\n  );\n}\n"})})]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"controlled-vs-uncontrolled-components",children:"Controlled vs Uncontrolled Components"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Pattern"}),(0,t.jsx)(n.th,{children:"Description"}),(0,t.jsx)(n.th,{children:"Example"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Controlled"}),(0,t.jsx)(n.td,{children:"Parent owns state"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:"<input value={x} onChange={...} />"})})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"Uncontrolled"}),(0,t.jsx)(n.td,{children:"DOM owns state"}),(0,t.jsx)(n.td,{children:(0,t.jsx)(n.code,{children:'<input defaultValue="x" ref={ref} />'})})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Rule of thumb"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Forms \u2192 controlled"}),"\n",(0,t.jsx)(n.li,{children:"Simple inputs / perf-critical \u2192 uncontrolled"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"provider--dependency-injection-pattern",children:"Provider / Dependency Injection Pattern"}),"\n",(0,t.jsx)(n.p,{children:"Uses Context to inject dependencies (theme, auth, services)."}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Good for"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Global config"}),"\n",(0,t.jsx)(n.li,{children:"App-wide services"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Avoid"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"High-frequency changing values"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"feature-based-architecture-recommended",children:"Feature-Based Architecture (Recommended)"}),"\n",(0,t.jsxs)(n.p,{children:["Organize code by ",(0,t.jsx)(n.strong,{children:"feature"}),", not by type."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-txt",children:"features/\n \u2514\u2500 auth/\n    \u251c\u2500 components/\n    \u251c\u2500 hooks/\n    \u251c\u2500 api.ts\n    \u2514\u2500 slice.ts\n"})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.strong,{children:"Benefits"}),":"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"Scales well"}),"\n",(0,t.jsx)(n.li,{children:"Clear ownership"}),"\n",(0,t.jsx)(n.li,{children:"Easier refactoring"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"state-ownership-rules",children:"State Ownership Rules"}),"\n",(0,t.jsx)(n.p,{children:"Ask:"}),"\n",(0,t.jsxs)(n.ol,{children:["\n",(0,t.jsx)(n.li,{children:"Who needs this state?"}),"\n",(0,t.jsx)(n.li,{children:"How often does it change?"}),"\n",(0,t.jsx)(n.li,{children:"Is it derived or source-of-truth?"}),"\n"]}),"\n",(0,t.jsxs)(n.p,{children:["Lift state ",(0,t.jsx)(n.strong,{children:"only as high as necessary"}),"."]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"anti-patterns-to-avoid",children:"Anti-Patterns to Avoid"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsx)(n.li,{children:"God components"}),"\n",(0,t.jsx)(n.li,{children:"Deep prop drilling without reason"}),"\n",(0,t.jsx)(n.li,{children:"Overusing context"}),"\n",(0,t.jsx)(n.li,{children:"Premature abstractions"}),"\n",(0,t.jsx)(n.li,{children:"Tight coupling between components"}),"\n"]}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h2,{id:"key-takeaways",children:"Key Takeaways"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Prefer ",(0,t.jsx)(n.strong,{children:"hooks + composition"})," over HOCs"]}),"\n",(0,t.jsxs)(n.li,{children:["Architecture is about ",(0,t.jsx)(n.strong,{children:"intent"}),", not files"]}),"\n",(0,t.jsx)(n.li,{children:"Patterns are tools \u2014 not rules"}),"\n",(0,t.jsx)(n.li,{children:"Optimize for readability first, performance second"}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(a,{...e})}):a(e)}},8453(e,n,r){r.d(n,{R:()=>o,x:()=>l});var s=r(6540);const t={},i=s.createContext(t);function o(e){const n=s.useContext(i);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),s.createElement(i.Provider,{value:n},e.children)}}}]);