"use strict";(globalThis.webpackChunkbetter_docs=globalThis.webpackChunkbetter_docs||[]).push([[3165],{8262(e,n,t){t.r(n),t.d(n,{assets:()=>a,contentTitle:()=>c,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>o});const r=JSON.parse('{"id":"React/react-internals","title":"React Internals","description":"----------------","source":"@site/docs/React/React Internals.md","sourceDirName":"React","slug":"/React/react-internals","permalink":"/better-docs/docs/React/react-internals","draft":false,"unlisted":false,"editUrl":"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/React/React Internals.md","tags":[],"version":"current","sidebarPosition":15,"frontMatter":{"id":"react-internals","title":"React Internals","sidebar_position":15},"sidebar":"tutorialSidebar","previous":{"title":"Compound Components","permalink":"/better-docs/docs/React/compound-components"},"next":{"title":"Reference","permalink":"/better-docs/docs/React/reference"}}');var i=t(4848),s=t(8453);const d={id:"react-internals",title:"React Internals",sidebar_position:15},c=void 0,a={},o=[{value:"Fiber Architecture &amp; Reconciliation",id:"fiber-architecture--reconciliation",level:2},{value:"Render Phases: Render vs Commit",id:"render-phases-render-vs-commit",level:2},{value:"Update Scheduling &amp; Prioritization",id:"update-scheduling--prioritization",level:2},{value:"React Internal Debugging (react-dom source)",id:"react-internal-debugging-react-dom-source",level:2},{value:"Notes &amp; Caveats",id:"notes--caveats",level:2}];function l(e){const n={code:"code",h2:"h2",hr:"hr",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.R)(),...e.components},{Details:t}=n;return t||function(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}("Details",!0),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.h2,{id:"fiber-architecture--reconciliation",children:"Fiber Architecture & Reconciliation"}),"\n",(0,i.jsx)(n.p,{children:"React Fiber is a reimplementation of the React core algorithm to enable incremental rendering and prioritization of updates."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Concept"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fiber"}),(0,i.jsx)(n.td,{children:"Lightweight object representing a component and its state, props, and effects"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Reconciliation"}),(0,i.jsx)(n.td,{children:"Process of comparing virtual DOM with previous render to determine minimal DOM updates"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Fiber Tree"}),(0,i.jsx)(n.td,{children:"Data structure representing the component tree with fibers for each node"})]})]})]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Conceptual Fiber Flow"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"Virtual DOM diff -> Fiber nodes created/updated -> Changes scheduled based on priority -> Commit phase updates the real DOM\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"render-phases-render-vs-commit",children:"Render Phases: Render vs Commit"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Phase"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Render Phase"}),(0,i.jsx)(n.td,{children:"React calculates which changes are needed; pure and interruptible; no DOM mutations yet"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Commit Phase"}),(0,i.jsx)(n.td,{children:"Changes are applied to the DOM; side effects run; not interruptible"})]})]})]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Flow Example"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-text",children:"Render Phase:\n- Compare old vs new virtual DOM\n- Generate Fiber effect list\n- Can be paused/interrupted\n\nCommit Phase:\n- Apply DOM updates\n- Run useLayoutEffect and class component lifecycle methods (componentDidMount/Update)\n- Cannot be interrupted\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"update-scheduling--prioritization",children:"Update Scheduling & Prioritization"}),"\n",(0,i.jsx)(n.p,{children:"React schedules updates with priorities using the Fiber architecture."}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Priority Type"}),(0,i.jsx)(n.th,{children:"Description"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Synchronous (Immediate)"}),(0,i.jsx)(n.td,{children:"High-priority updates like user input"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Discrete"}),(0,i.jsx)(n.td,{children:"Clicks, typing events that need quick feedback"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Continuous"}),(0,i.jsx)(n.td,{children:"Animations or transitions"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Idle"}),(0,i.jsx)(n.td,{children:"Low-priority background updates"})]})]})]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example: Update Scheduling"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// Example: useTransition allows marking updates as low-priority\nimport { useState, useTransition } from 'react';\n\nfunction App() {\n  const [text, setText] = useState('');\n  const [isPending, startTransition] = useTransition();\n\n  const handleChange = e => {\n    startTransition(() => setText(e.target.value)); // Low-priority update\n  };\n\n  return (\n    <>\n      <input onChange={handleChange} placeholder=\"Type here\" />\n      {isPending && <p>Updating...</p>}\n      <p>{text}</p>\n    </>\n  );\n}\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"react-internal-debugging-react-dom-source",children:"React Internal Debugging (react-dom source)"}),"\n",(0,i.jsxs)(n.table,{children:[(0,i.jsx)(n.thead,{children:(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.th,{children:"Tool / Technique"}),(0,i.jsx)(n.th,{children:"Purpose"})]})}),(0,i.jsxs)(n.tbody,{children:[(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"React DevTools"}),(0,i.jsx)(n.td,{children:"Inspect component tree, props, state, hooks, and re-renders"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:(0,i.jsx)(n.code,{children:"__REACT_DEVTOOLS_GLOBAL_HOOK__"})}),(0,i.jsx)(n.td,{children:"Access DevTools hook in browser for debugging React internals"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Logging Fiber nodes"}),(0,i.jsx)(n.td,{children:"Developers can log internal fibers in development builds for deep debugging"})]}),(0,i.jsxs)(n.tr,{children:[(0,i.jsx)(n.td,{children:"Profiling"}),(0,i.jsx)(n.td,{children:"Measure commit times, render durations, and effect executions"})]})]})]}),"\n",(0,i.jsxs)(t,{children:[(0,i.jsx)("summary",{children:"Example: Debug Fiber Node"}),(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"// Accessing Fiber in dev mode (not recommended for production)\nconst root = document.getElementById('root');\nconst fiberNode = Object.values(root)[0];\nconsole.log(fiberNode); // Logs the internal Fiber structure\n"})})]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"notes--caveats",children:"Notes & Caveats"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Fiber architecture allows React to split rendering work into units and prioritize updates efficiently."}),"\n",(0,i.jsx)(n.li,{children:"Render phase is pure and can be paused; commit phase is synchronous and applies changes to the DOM."}),"\n",(0,i.jsx)(n.li,{children:"Understanding update scheduling helps optimize app performance, especially for large trees."}),"\n",(0,i.jsx)(n.li,{children:"Internal Fiber debugging is mostly educational; avoid relying on it in production."}),"\n"]})]})}function h(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}},8453(e,n,t){t.d(n,{R:()=>d,x:()=>c});var r=t(6540);const i={},s=r.createContext(i);function d(e){const n=r.useContext(s);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:d(e.components),r.createElement(s.Provider,{value:n},e.children)}}}]);